@タイトル_実績
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC 最大ページ
#DIM DYNAMIC 実績数
#DIMS DYNAMIC 実績概要
#DIM CONST 最大表示数 = 20
#DIM DYNAMIC 表示数
#DIMS DYNAMIC 実績名, VARSIZE("実績")+VARSIZE("キャラ実績")
#DIM DYNAMIC 配列 = 1
#DIM DYNAMIC 通常実績数

FOR LCOUNT, 0, VARSIZE("実績")
	SIF ERDNAME(実績, LCOUNT) != ""
		実績名:(配列++) = %ERDNAME(実績, LCOUNT)%
NEXT
通常実績数 = 配列
FOR LCOUNT, 0, VARSIZE("キャラ実績")
	SIF ERDNAME(キャラ実績, LCOUNT) != ""
		実績名:(配列++) = %ERDNAME(キャラ実績, LCOUNT)%
NEXT

実績数 = 0
FOR LCOUNT, 0, VARSIZE("実績名")
	SIF 実績名:LCOUNT != ""
		実績数 = LCOUNT
NEXT

;1ページで1～20まで表示するのでひとつ下げて計算する ページは1からカウントする
最大ページ = ((実績数-1)/最大表示数)

LOADGLOBAL

;DRAWLINE

;実績関係は0からではなく1からカウントする
FOR LCOUNT, 実績ページ*最大表示数+1, 実績ページ*最大表示数+最大表示数+1
	実績概要 = 
	
	SELECTCASE 実績名:LCOUNT
		;通常実績
		CASE "Welcome to eraBEMANI!!"
			実績概要 += "eraBEMANIを起動する"
		CASE "これで君も一人前の調教師だ"
			実績概要 += "難易度NORMALをクリアする"
		CASE "GLAY ZONE"
			実績概要 += "難易度HYPERをクリアする"
		CASE "eraBEMANIにも穴はあるんだよな……"
			実績概要 += "難易度ANOTHERをクリアする"
		CASE "女尊男卑"
			実績概要 += "女性主人で任意の難易度をクリアする"
		CASE "メモリーカードの容量が足りません"
			実績概要 += "すべてのセーブデータスロットを使い切る"
		CASE "他にすることは無いのか まったく"
			実績概要 += "eraBEMANIを100回起動する"
		CASE "この実績が達成できてしまったあなたは立派なビーマー"
			実績概要 += "段位認定でボーナス133333を得る"
		CASE "皆伝？これからもよろしくな"
			実績概要 += "段位認定皆伝をクリアする"
		CASE "MANIERA"
			実績概要 += "1周目のSTANDARDを1回の奴隷購入でクリアする"
		CASE "Without you tonight"
			実績概要 += "調教対象が居ない状態で夜を過ごす"
		CASE "そんな装備で大丈夫か？"
			実績概要 += "アイテムをひとつも持っていない状態で調教を開始する"
		CASE "決めた 明日 好きって言うってね"
			実績概要 += "キャラに恋慕を付ける"
		CASE "アンハッピーバースデー"
			実績概要 += "当日が誕生日のキャラを購入する"
		CASE "俺はチートマニア！お前は何マニア？"
			実績概要 += "デバッグコマンドを使用する"
		CASE "いつのバージョンだよ"
			実績概要 += "隠しコマンドを入力する"
		CASE "母乳ソムリエ"
			実績概要 += "合計10人以上の母乳を飲む"
		CASE "シコり続けるのだ……"
			実績概要 += "合計10人以上の男性に自慰をさせる"
		CASE "Insane Techniques"
			実績概要 += "四重絶頂させる"
		CASE "下弦の月に願うは君への罰"
			実績概要 += "月齢が23～25の時に恋慕状態の奴隷を売却する"
		CASE "寂しげな薬指"
			実績概要 += "[既婚者]を持つキャラを陥落させる"
		CASE "-5pt"
			実績概要 += "コヤジを披露する"
		CASE "ポイズンクッキング"
			実績概要 += "ゾンビに料理を作らせる"
		CASE "もう全部あいつ一人でいいんじゃないかな"
			実績概要 += "キャラを一人も購入せずにパートナーだけでSTRATEGYモードをクリアする"
		CASE "命を弄ぶ者"
			実績概要 += "体外受精で宿した子供を堕ろす"
		CASE "10，000，000，000"
			実績概要 += "STRATEGYモードで期限内に100億稼ぐ"
		CASE "5000兆円欲しい！"
			実績概要 += "5000兆円稼ぐ"
		CASE "HAT TRICK"
			実績概要 += "3ターン連続でキャラを陥落させる"
		CASE "バッドトリップ"
			実績概要 += "媚薬、強精神薬、利尿剤、お酒、魔剤の効果を同時に発動させる"
		CASE "You're pretty good."
			実績概要 += "Sense 2007のライブを成功させる"
		CASE "escape"
			実績概要 += "抑圧と解放。きっと二つとも必要なもの。"
		CASE "ヨリドリミドリ"
			実績概要 += "陥落したイロドリミドリの全員と同棲する"
		CASE "いいからドーピングだ！"
			実績概要 += "翔に魔剤を飲ませる"
		CASE "あけおめアゲイ～ン"
			実績概要 += "新年を迎える"
		CASE "真・足神様"
			実績概要 += "マイグルーヴレーダーを完成させる"
		CASE "プロジェクト・ディーヴァ"
			実績概要 += "ライブでボーカリストが[人気]を取得する"
		CASE "INFINITE PLAYER"
			実績概要 += "ゲーム内時間で6928日過ごす"
		CASE "他人がバンドで稼いだ金でめしが食いたい"
			実績概要 += "芸能プロダクションの収入のみでSTRATEGYモードをクリアする"
		CASE "Power of Nature"
			実績概要 += "農産物をすべて解禁する"
		CASE "やりこみ派"
			実績概要 += "CHALLENGEモードでゲームをクリアする"
		CASE "one or eight"
			実績概要 += "カジノの配当で一度に1億以上受け取る"
		CASE "という夢を見たのさ"
			実績概要 += "STANDARDモードでバッドエンドを迎える"
		CASE "前☆戯☆王"
			実績概要 += "Ｖ経験、Ａ経験、性交経験を0の状態でキャラを陥落させる"
		CASE "そして世界は粘液に満ちた"
			実績概要 += "スライム化イベントを10回見る"
		CASE "ゲームの達人"
			実績概要 += "ミニゲームを累計100回クリア、または勝利する"
		CASE "SPEED DEMON"
			実績概要 += "1周目のゲームを20日以内にクリアする"
		CASE "君eraBEMANI上手いねぇ"
			実績概要 += "1周目のSTANDARDモードを難易度LEGGENDARIAでクリアする"
		CASE "I've so Happy"
			実績概要 += "愛撫コマンドのみでキャラを売却可能にする"
		CASE "ロメロ再殺部隊"
			実績概要 += "ゾンビ化したキャラを解体する"
		CASE "Usi's How to play eraBEMANI"
			実績概要 += "チュートリアルを受講する"
		CASE "作品には手を触れないでください"
			実績概要 += "博物館で一つのオブジェクトを1000回汚させる"
		CASE "DEATH BRINGER"
			実績概要 += "10人以上殺害する"
		CASE "なんか変だ！"
			実績概要 += "体質MODを適用した状態でキャラを購入する"
		CASE "魚氷に上り 耀よひて"
			実績概要 += "ニコニコサンフラワーキッスを使ってキスをする"
		CASE "下品なんですが……フフ……"
			実績概要 += "手だけをコレクションした博物館を開館する"
		CASE "産め！神が子を！"
			実績概要 += "神に出産させる"
		CASE "100-???-???"
			実績概要 += "奴隷を100万パセリ以上で売却する"
		CASE "100-200-???"
			実績概要 += "奴隷を200万パセリ以上で売却する"
		CASE "100-200-400"
			実績概要 += "奴隷を400万パセリ以上で売却する"
		CASE "ポップンタイムトリップ"
			実績概要 += "1998年9月28日にタイムトリップする"
		CASE "打打打打打打打打打打"
			実績概要 += "10回連続でスパンキングする"
		CASE "conflict歌います"
			実績概要 += "ライブでconflictを歌う"
		CASE "徳川の埋蔵金まだー？"
			実績概要 += "初めて温泉を発掘する"
		CASE "UNLIMITED FIRE"
			実績概要 += "能力値をLv11以上に上げる"
		CASE "クリアマークに希望と涙を添えて"
			実績概要 += "EDITとオリジナルコース以外の段位認定を全てクリアする"
		;以下キャラ実績
		CASE "「僕は■なのに……」"
			実績概要 += "ルシェをメスイキさせる"
		CASE "「あ、私午後から畑行きますんで」"
			実績概要 += "午前中から既にやる気の無いマモニスおじさんをひっぱたく"
		CASE "天空の夜明け"
			実績概要 += "添い寝してくるキュベリアと一夜を過ごす"
		CASE "ニンフちゃんのファンやめます"
			実績概要 += "ニンフちゃん主演のAVを売りさばく"
		CASE "ニーソマニアIIDX"
			実績概要 += "ニーソ姫にニーソを履いたまま足扱きされて射精する"
		CASE "精子の海のリントヴルム"
			実績概要 += "1回の調教でモードの口、膣、尻のすべてに射精する"
		CASE "雷龍が如く"
			実績概要 += "ファウラに電極を使う"
		CASE "はじけっ！ギュイ～ン！"
			実績概要 += "レイシスの乳房を弾く"
		CASE "I only Divide Me"
			実績概要 += "Σかリアンを素数価格で売却する"
		CASE "生命の環を紡いで"
			実績概要 += "1回の調教でフローラに10回以上中出しする"
		CASE "この子の七つのお祝いに"
			実績概要 += "育江の出産から7年を経過させる"
		CASE "殿方の笛を鳴らすのもお得意で？"
			実績概要 += "山吹にフェラさせる。もしくは山吹でフェラをする"
		CASE "「それ、もうちょい安ぅならんやろか？」"
			実績概要 += "ター子の交渉で値引きしたアイテムを購入する"
		CASE "パラドックス"
			実績概要 += "ロッテとラッテを対面させる"
		CASE "「F◯2アダルトに投稿するんだぬ？」"
			実績概要 += "うさぬこの自慰を撮影する"
		CASE "「今さら首輪付けるなんて！逃げたりしないです♥」"
			実績概要 += "陥落済みのポチコと散歩する"
		CASE "「ご主人！？それは自殺行為です！」"
			実績概要 += "気温5℃以下の日に全裸でポチコと散歩する"
		CASE "「わ～いらくち～ん」"
			実績概要 += "パステルくん主人で奴隷と高相性の助手を使用する"
		CASE "「科学の発展に犠牲は付き物デース」"
			実績概要 += "ガッキー博士で奴隷の体力を0にする"
		CASE "日向美商店街で噂の売春宿"
			実績概要 += "日向美ビタースイーツ♪のメンバーを全員娼館に配属する"
		CASE "「ごちそうさまでした」をちゃーんとゆってね"
			実績概要 += "野増菜かなでの愛液を岩清水で啜り上げる"
		CASE "くっ殺"
			実績概要 += "オルトリンデをドラゴンで犯す"
		CASE "精子もどっかにそりゃあるでしょ！"
			実績概要 += "ルートと妊娠確定セックスをする"
		CASE "竿、包み込む。弐つの双丘"
			実績概要 += "クロノスとカイロスにダブルパイズリをさせる"
		CASE "I LOVE SAKURA"
			実績概要 += "タルタでラジェ・ガレト・ヴァロ全員の童貞を奪う"
		CASE "Affection"
			実績概要 += "理子に親愛を付ける"
		CASE "(天使じゃ)ないです"
			実績概要 += "駄天使ちゃんにサドを付ける"
		CASE "オナホパフェだよ☆ONP"
			実績概要 += "ふたなり化、もしくは性転換しためうとまり花をオナホで射精させる"
		CASE "無能な経営者"
			実績概要 += "STRATEGYモードで金欠エンドを迎える"
		CASE "帝国軍ご奉仕部隊"
			実績概要 += "かなで・りむると調教後3Pをする"
		CASE "ココナッツミルクの作り方"
			実績概要 += "ここなつのダブル素股で射精する"
		CASE "地元のお酒めう！"
			実績概要 += "ひなビタキャラにピュアモルトウイスキー倉吉を飲ませる"
		CASE "クリスマス中止のお知らせ"
			実績概要 += "12月24日・25日につららを購入する"
		CASE "お前よりくまモンの方がいい！"
			実績概要 += "オトベアを売り飛ばす"
		CASE "パウリ効果"
			実績概要 += "ヴォルフガングがアイテムを壊す"
		CASE "何でも言うことを聞いてくれるリノンチャン"
			実績概要 += "リノンをハッキングして従属させる"
		CASE "Deuilの熱烈すぎる追っかけ"
			実績概要 += "ユーリ、アッシュ、スマイルの三人を陥落させる"
		CASE "今夜はたこ焼きパーティ"
			実績概要 += "ユーズ、ター子、レイジを調理室に配属する"
		CASE "卵管キラーガール"
			実績概要 += "ふたなりのいちかを主人にして10人孕ませる"
		CASE "ごほうびをカジる権利"
			実績概要 += "マッドラットにチーズ料理を用意する"
		CASE "R壱萬"
			実績概要 += "乙姫がメインの本を出版する"
		CASE "LEWDNESS DRIVE"
			実績概要 += "ペンデュラム・ライゼ、ヨナ・ライゼ、ギデオン・ライゼに淫乱を付ける"
		CASE "寝取り魔なゴーストバスター"
			実績概要 += "黒亀 北斗で向来 隼もしくは御影 昴に恋慕を付ける"
		CASE "淫靡tation"
			実績概要 += "荒場 流子を淫乱陥落させる"
		CASE "C＆B"
			実績概要 += "ヨナ・ライゼをC＆B同時絶頂させる"
		CASE "みなえをチェック！してあげて……"
			実績概要 += "小野 美苗を1年以上放置する"
		CASE "「じゃ、その曲ちょっと貸してくんない？」"
			実績概要 += "MZDと共通の担当曲で共演する"
		CASE "「ギブみーチョッカれーつ」"
			実績概要 += "にんじんを収穫する"
		CASE "「絶対大丈夫だよっ！」"
			実績概要 += "まり花でミラクル・スイート・スイーツ・マジック！！を詠唱する"
		CASE "電マの暮らし"
			実績概要 += "めばえを電気按摩で絶頂させる"
		CASE "一番いいのを頼む"
			実績概要 += "トリスメギストスに改造したアイテムを装備させる"
		CASE "ドイツ人を右に"
			実績概要 += "主人のシカトリス相手に一転攻勢する"
		CASE "Quiet"
			実績概要 += "ジズがALTの歌声を奪う"
		CASE "ハート、おれの心臓"
			実績概要 += "マッドラットと共にハートの肉体を取り戻す"
		CASE "ラブとエネミー狙い撃ち"
			実績概要 += "マゼランでハニーバニーを詠唱する"
		CASE "もっとマシな使い方はないのか"
			実績概要 += "ミゼランを誰かの意中の相手に変身させる"
		CASEELSE
			CONTINUE
	ENDSELECT

	IF LCOUNT >= 通常実績数
		IF キャラ実績:(実績名:LCOUNT)
			CALL COLUMNTOOLTIPL, 0, @"{LCOUNT, 3}.%実績名:LCOUNT%", 実績概要
		ELSE
			CALL COLUMNTOOLTIPL, 0, @"{LCOUNT, 3}.[条件未達成]", 実績概要, "gray"
		ENDIF
	ELSE
		IF 実績:(実績名:LCOUNT)
			CALL COLUMNTOOLTIPL, 0, @"{LCOUNT, 3}.%実績名:LCOUNT%", 実績概要
		ELSE
			CALL COLUMNTOOLTIPL, 0, @"{LCOUNT, 3}.[条件未達成]", 実績概要, "gray"
		ENDIF
	ENDIF
	表示数++
NEXT
FOR LCOUNT, 0, 20-表示数
	CALL COLUMNPRINTL, 0, ""
NEXT

CALL COLUMNDRAWLINE, 0
;PRINTPLAINFORM 　実績ページ.{実績ページ}　

CALL COLUMNPRINT, 0, @"%RETURNSPACE(実績ページ > 0, "[1] 前ページ ")%"
CALL COLUMNPRINT, 0, @"%RETURNSPACE(実績ページ < 最大ページ, "[9] 次ページ")%"
CALL COLUMNPRINTL, 0, ""

@タイトル_実績_INPUT
SELECTCASE CRESULT:1
	CASE 1
		実績ページ--
	CASE 9
		実績ページ++
ENDSELECT

@実績解除, 実績名
#DIM DYNAMIC LCOUNT
#DIMS DYNAMIC 実績名

SIF ORIGIN
	RETURN
;SIF CHARANUM > 0 && MASTER >= 0 && NAME:MASTER == "BEATFREE"
;	RETURN
SIF 実績解除不可
	RETURN
SIF FLAG:難易度 == -1
	RETURN

LOADGLOBAL
FOR LCOUNT, 0, VARSIZE("実績")
	IF ERDNAME(実績, LCOUNT) == @"%実績名%" && !実績:LCOUNT
		SIF 実績メッセージ
			PRINTFORMW 実績を解除:%実績名%
		実績:LCOUNT = 1
		SAVEGLOBAL
		BREAK
	ENDIF
NEXT
FOR LCOUNT, 0, VARSIZE("キャラ実績")
	IF ERDNAME(キャラ実績, LCOUNT) == @"%実績名%" && !キャラ実績:LCOUNT
		SIF 実績メッセージ
			PRINTFORMW 実績を解除:%実績名%
		キャラ実績:LCOUNT = 1
		SAVEGLOBAL
		BREAK
	ENDIF
NEXT

;;;あくまで周回用
@CLEAR_ACHIEVEMENT_FLAG
美苗チェック = 0


;;;単純にコマンド実行が条件で判定されるタイプの実績はここで
@コマンド実績判定
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC 人数

;汎用実績
SIF !GROUPMATCH(SELECTCOMS, "愛撫", "アナル愛撫", "胸愛撫")
	愛撫双:TARGET:0 = -1

SIF CSTR:種族 == "ゾンビ" && GROUPMATCH(SELECTCOMS, "料理を作る", "お菓子を作る")
	CALL 実績解除, "ポイズンクッキング"

{
SIF TFLAG:ニコニコサンフラワーキッス && 
	GROUPMATCH(SELECTCOMS, "キスする", "キスしてもらう", "キス（ドラゴン）", "正常位キスさせる", "逆レイプキス", 
	"正常位キス", "騎乗位キス", "対面座位キス", "正常位アナルキス", "騎乗位アナルキス", "対面座位アナルキス")
}
	CALL 実績解除, "魚氷に上り 耀よひて"

IF SELECTCOMS == "スパンキング"
	打カウント++
	SIF 打カウント >= 10
		CALL 実績解除, "打打打打打打打打打打"
ELSE
	打カウント = 0
ENDIF

IF SELECTCOMS == "自慰" && SEX(TARGET) == 1
	SIF !男性に自慰させた人数:(NOF(TARGET))
		人数 = 1
	男性に自慰させた人数:(NOF(TARGET))++
	IF 人数
		人数 = 0
		FOR LCOUNT, 0, CHARANUM
			SIF 男性に自慰させた人数:LCOUNT
				人数++
		NEXT
		SIF 人数 >= 10
			CALL 実績解除, "シコり続けるのだ……"
	ENDIF
ENDIF


;キャラ実績
SELECTCASE CHARANAMEF(TARGET)
	CASE "ファウラ"
		SIF GROUPMATCH(SELECTCOMS, "乳房電極", "アナル電極")
			CALL 実績解除, "雷龍が如く"
	CASE "＊うさぬこ＊"
		SIF (TEQUIP:ビデオカメラ || TEQUIP:ライブ配信) && GROUPMATCH(SELECTCOMS, "自慰", "胸自慰", "オナフェラ", "騎乗乳房自慰")
			CALL 実績解除,  "「F◯2アダルトに投稿するんだぬ？」"
	CASE "マモニス"
		SIF SELECTCOMS == "スパンキング" && ターン == "昼"
			CALL 実績解除, "「あ、私午後から畑行きますんで」"
	CASE "レイシス"
		SIF SELECTCOMS == "乳スパンキング"
			CALL 実績解除, "はじけっ！ギュイ～ン！"
	CASE "オルトリンデ"
		SIF GROUPMATCH(SELECTCOMS, "膣を犯す（ドラゴン）", "アナルを犯す（ドラゴン）")
			CALL 実績解除, "くっ殺"
	CASE "野増菜 かなで"
		SIF SELECTCOMS == "岩清水"
			CALL 実績解除, "「ごちそうさまでした」をちゃーんとゆってね"
	CASE "ポチコ"
		IF SELECTCOMS == "野外プレイ" && 陥落(TARGET)
			CALL 実績解除, "「今さら首輪付けるなんて！逃げたりしないです♥」"
			SIF FLAG:気温 <= 50 && TEQUIP:MASTER:特殊 == 0 && TEQUIP:MASTER:上半身上着 == 0 && TEQUIP:MASTER:下半身上着 == 0 && TEQUIP:MASTER:上半身下着 == 0 && TEQUIP:MASTER:下半身下着 == 0 && TEQUIP:MASTER:足元 == 0
				CALL 実績解除, "「ご主人！？それは自殺行為です！」"
		ENDIF
	CASE "クロノス", "カイロス"
		SIF SELECTCOMS == "ダブルパイズリ" && GROUPMATCH(CHARANAMEF(ASSI), "クロノス", "カイロス")
			CALL 実績解除, "竿、包み込む。弐つの双丘"
	CASE "リノン", "リノン(黒)"
		SIF SELECTCOMS == "ハッキング" && ハッキング命令 == "従属"
			CALL 実績解除, "何でも言うことを聞いてくれるリノンチャン"
	CASE "トリスメギストス"
		SELECTCASE SELECTCOMS
			CASE "バイブ"
				SIF アイテム改造:バイブ != "バイブ" && !TEQUIP:触手
					CALL 実績解除, "一番いいのを頼む"
			CASE "アナルバイブ"
				SIF アイテム改造:アナルバイブ != "アナルバイブ" && !TEQUIP:触手
					CALL 実績解除, "一番いいのを頼む"
			CASE "アナルビーズ"
				SIF アイテム改造:アナルビーズ != "アナルビーズ"
					CALL 実績解除, "一番いいのを頼む"
			CASE "オナホール"
				SIF アイテム改造:オナホール != "オナホール" && !TEQUIP:触手
					CALL 実績解除, "一番いいのを頼む"
			CASE "搾精機"
				CALL 実績解除, "一番いいのを頼む"
			CASE "浣腸器"
				SIF アイテム改造:浣腸器 != "浣腸器" && !TEQUIP:触手
					CALL 実績解除, "一番いいのを頼む"
			CASE "野外プレイ"
				SIF アイテム改造:首輪 != "首輪"
					CALL 実績解除, "一番いいのを頼む"
			CASE "新妻プレイ"
				SIF アイテム改造:エプロン != "エプロン"
					CALL 実績解除, "一番いいのを頼む"
		ENDSELECT
ENDSELECT

SIF CHARANAMEF(TARGET) == "山吹" && GROUPMATCH(SELECTCOMS, "フェラチオ", "パイズリフェラ")
	CALL 実績解除, "殿方の笛を鳴らすのもお得意で？"
SIF CHARANAMEF(PLAYER) == "山吹" && GROUPMATCH(SELECTCOMS, "フェラする", "パイズリフェラする")
	CALL 実績解除, "殿方の笛を鳴らすのもお得意で？"
