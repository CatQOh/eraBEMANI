@ロケーション条件_ライブハウス
;汎用ロケーション 条件無し
RETURN 1

@バイト条件_ライブハウス
バイト要項 = 夕方、夜の時間帯で募集中
SIF GROUPMATCH(ターン, "夕", "夜")
	バイト可能 = 1
;ロケーション解禁済みで可能
SIF FINDELEMENT(解禁済みロケーション, "ライブハウス", 0, VARSIZE("解禁済みロケーション"), 1) >= 0
	RETURN -1

RETURN 0

@出現キャラ_ライブハウス
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC グループ数

FOR LCOUNT, 1, CHARANUM
	;学校などに行ってるキャラは居ない
	SIF CSTR:LCOUNT:現在地 != ""
		CONTINUE
	;音楽やってる人がいる 非常に多いので各5%
	SELECTCASE CHARANAMEF(LCOUNT)
		{
		CASE "菱宮 春一", "樹野 あんず", "ミミ", "ニャミ", "ジュディ", "マリィ",
			 "ザ・キング", "ショルキー", "タイマー", "ユーリ", "アッシュ", "スマイル",
			 "ウーノ", "ツースト", "若さん", "フォース", "セシル", "HOT.D", "ロッテ", 
			 "ナカジ", "ナズナ", "スズナ", "虹野 ひかり", "夢野 みらい", "星野 そら",
			 "ホワイトメリー", "歩", "ミニッツ", "オオカミ少年", "レナ", "パンデス",
			 "スモーク", "アン", "ンビリ", "サン", "クアトロ", "ゲレゲレ", "ライラ", 
			 "まりん", "熊井さん", "シェリー", "うた", "アフロ", "レディ", "オトベア",
			 "璃音", "愛野 ヒカリ", "美嶋 はるな", "鬼蝮 ユリア", "八咫烏 鋼太郎", "知雲 ひばり",
			 "伊賀崎ノ 楠子", "天稲荷 コテツ", "もえ", "アイス", "イワン", "レオン", "フォクシー", "シャトー・ロワーレ", "みほ"
		}
			$出現
			SIF 出現率:LCOUNT >= 0
				出現率:LCOUNT = 5
		CASEELSE
			SIF GROUPMATCH("ときめきアイドル", CSTR:LCOUNT:登場作品, CSTR:LCOUNT:登場作品２, CSTR:LCOUNT:登場作品３)
				GOTO 出現
			SIF GROUPMATCH("イロドリミドリ", CSTR:LCOUNT:登場作品, CSTR:LCOUNT:登場作品２, CSTR:LCOUNT:登場作品３)
				GOTO 出現
			SIF GROUPMATCH("オンゲキ", CSTR:LCOUNT:登場作品, CSTR:LCOUNT:登場作品２, CSTR:LCOUNT:登場作品３)
				GOTO 出現
			SIF GROUPMATCH("ひなビタ♪", CSTR:LCOUNT:登場作品, CSTR:LCOUNT:登場作品２, CSTR:LCOUNT:登場作品３)
				GOTO 出現
			SIF GROUPMATCH("バンめし♪", CSTR:LCOUNT:登場作品, CSTR:LCOUNT:登場作品２, CSTR:LCOUNT:登場作品３)
				GOTO 出現
			;休日または夜なら集団で来ているグループとかがある
			IF (ISHOLIDAY() || ターン == "夜") && CSTR:LCOUNT:在校 != "" && RANDPER(3) && グループ数 < 10
				;相性の良いキャラと3人で行動している
				CALL クラスメイト選出, LCOUNT, "相性"
				;2人以上揃わなかったら無かったことにする
				SIF RESULT:0 == 0
					CONTINUE
				集団行動:グループ数:0 = LCOUNT
				集団行動:グループ数:1 = RESULT:0
				集団行動:グループ数:2 = RESULT:1
				グループ数++
			ENDIF
	ENDSELECT
NEXT
