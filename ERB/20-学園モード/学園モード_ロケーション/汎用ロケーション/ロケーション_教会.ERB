@ロケーション条件_教会
RETURN -1

@出現キャラ_教会
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC グループ数
#DIM DYNAMIC 始点
#DIM DYNAMIC 終点

;NOではなく登録番号で指定する
IF データベース参照中
	始点 = データベース参照中
	終点 = データベース参照中+1
ELSE
	IF 始点
		終点 = 始点
		始点 = 1
	ELSE
		始点 = RAND(1, CHARANUM)
		終点 = CHARANUM
	ENDIF
ENDIF

FOR LCOUNT, 始点, 終点
	;学校などに行ってるキャラは居ない
	SIF CSTR:LCOUNT:現在地 != "" && !データベース参照中
		CONTINUE
	;出現率:LCOUNT = {出現率(100分率)} で指定できる
	SELECTCASE CHARANAMEF(LCOUNT)
		CASE "ナサニエル", "ポエット", "アミュレット", "アンネース", "エヴァ・ラグエル", "一鬼 アカネ",　"バテシバ・アヒトフェル"
			SIF 出現率:LCOUNT >= 0
				出現率:LCOUNT = 100
		;教会っぽいキャラ（宗派問わず）が居る
		{
		CASE "サイレン", "デュエル", "駄天使ちゃん", "ニンフちゃん", "キュベリア", "キュベルト", "リリト", "EΛΠIΣ‡煌‡",
			 "フェリーラ", "クロノス", "カイロス", "アイオーネ", "イオリ", "サリュイス", "はまゆきちゃん", "エクレメス",
			 "ロビン", "セシル", "イマ", "ロキ", "アルフォンス・ミシェル", "オフィーリア", "ヴィルヘルム", "ファティマ", "チク・タク",
			 "アル・ハイア", "ミカ子", "第八皇女エルルーン", "ユグドラシル", "ラーズ", "ユーリ", "ココロ・ベルモンド", "アンナ・マルグレーテ", "ルチア・レ・ベルナデート", "レア・エ・フラータ", "アンコク・ミツバ"
		}
			SIF 出現率:LCOUNT >= 0
				出現率:LCOUNT = 20
	ENDSELECT
NEXT

SIF 始点 == 1
	RETURN
SIF !データベース参照中
	RESTART

@教会_専用コマンド
CALL COLUMNPRINTL, 0, "　[  0] - 懺悔する（全キャラの倫理観崩壊度が半減します）"

@教会_専用コマンド_INPUT
#DIM DYNAMIC 対象
#DIM DYNAMIC LCOUNT

PRINTFORML %CALLNAME:PLAYER%は教会で懺悔した。それまでの悪行、姦淫、不道徳な行動の全てを
PRINTL 神はその懺悔を聞き入れ、世界を少しだけ浄化してくれたようだ
PRINTW 全キャラの倫理観崩壊度が半減しました
FOR LCOUNT, 0, CHARANUM
	CFLAG:LCOUNT:倫理観 /= 2
NEXT
RETURN 1
