;@ロケーション_自宅
;日数表示
;CALL カラム生成, "自宅", "コマンド"

@自宅_コマンド
#DIM DYNAMIC 滞在者

CALL COLUMNSHOP_SCHOOL

CALL COLUMNDRAWLINE, 0
CALL COLUMNPRINTL, 0, @"□何をしよう？"

滞在者 = FINDCHARA(CSTR:現在地, @"%CALLNAME:PLAYER%の家", 1)
IF 滞在者 > 0
	SELECTCASE CSTR:滞在者:目的
		CASE "遊び"
			CALL COLUMNPRINTL, 0, @"　[200] - %CALLNAME:滞在者%と会話する"
			CALL COLUMNPRINTL, 0, @"　[201] - %CALLNAME:滞在者%とアダルトサイトを見る"
			CALL COLUMNPRINTL, 0, @"　[202] - %CALLNAME:滞在者%に思い切った提案をする"
			CALL COLUMNPRINTL, 0, @"　[203] - %CALLNAME:滞在者%と遊びに行く"
		CASE "看病"
			CALL COLUMNPRINTL, 0, @"　[210] - %CALLNAME:滞在者%に面倒を見てもらう"
			CALL COLUMNPRINTL, 0, @"　[211] - %CALLNAME:滞在者%と遊びに行く"
			;CALL COLUMNPRINTL, 0, @"　[212] - %CALLNAME:滞在者%に過度に甘えてみる"
			CALL COLUMNPRINTL, 0, @"　[212] - %CALLNAME:滞在者%に「体が熱い」と色気を出す"
		CASE "セックス"
			CALL COLUMNPRINTL, 0, @"　[220] - %CALLNAME:滞在者%と（性的に）遊ぶ"
			CALL COLUMNPRINTL, 0, @"　[221] - %CALLNAME:滞在者%と（性的な）遊びに行く"
			;CALL COLUMNPRINTL, 0, @"　[222] - %CALLNAME:滞在者%と健全に過ごす"
	ENDSELECT
ELSEIF GROUPMATCH(DOW(FLAG:曜日), "土", "日") || GROUPMATCH(ターン, "昼", "夕")
	CALL COLUMNPRINTL, 0, "　[110] - 遊びに行く"
	CALL COLUMNPRINTL, 0, "　[111] - 友人と遊びに行く"
	CALL COLUMNPRINTL, 0, "　[112] - 家に友人を呼ぶ"
	IF バイト先 != ""
		バイト可能 = 0
		TRYCALLFORM バイト条件_%バイト先%
		IF バイト可能
			CALL COLUMNPRINTL, 0, @"　[113] - %バイト先%のバイトに行く"
		ELSE
			CALL COLUMNPRINTL, 0, @"　[---] - %バイト先%のシフトは入っていません", "gray"
		ENDIF
	ELSE
		CALL COLUMNPRINTL, 0, "　[114] - バイトを探す"
	ENDIF
	CALL COLUMNPRINTL, 0, "　[400] - 家で過ごす"
ELSEIF ターン == "朝"
	CALL COLUMNPRINTL, 0, "　[100] - 学校へ行く "
	CALL COLUMNPRINTL, 0, "　[101] - クラスメイトと一緒に登校する"
	CALL COLUMNPRINTL, 0, "　[102] - 学校の保健室へ行く"
	CALL COLUMNPRINTL, 0, "　[103] - 他の学校に行く"
	CALL COLUMNPRINTL, 0, "　[104] - 何もせずサボる"
ELSEIF ターン == "夜"
	CALL COLUMNPRINTL, 0, "　[110] - 遊びに行く"
	IF バイト先 != ""
		バイト可能 = 0
		TRYCALLFORM バイト条件_%バイト先%
		IF バイト可能
			CALL COLUMNPRINTL, 0, @"　[113] - %バイト先%のバイトに行く"
		ELSE
			CALL COLUMNPRINTL, 0, @"　[---] - %バイト先%のシフトは入っていません", "gray"
		ENDIF
	ELSE
		CALL COLUMNPRINTL, 0, "　[114] - バイトを探す"
	ENDIF
	CALL COLUMNPRINTL, 0, "　[400] - 寝る"
ENDIF

CALL COLUMNPRINTL, 0, "　[500] - データベース"


@自宅_コマンド_INPUT
#DIM DYNAMIC LRESULT
#DIM DYNAMIC 滞在者
滞在者 = FINDCHARA(CSTR:現在地, @"%CALLNAME:PLAYER%の家", 1)

LRESULT = CRESULT:1
SELECTCASE LRESULT
	CASE 100
		CALL 朝_学校へ行く
	CASE 101
		CALL 朝_クラスメイトと一緒に登校する
	CASE 102
		CALL 朝_学校の保健室に行く
	CASE 103
		CALL 朝_他の学校に行く
	CASE 104
		CALL 朝_何もせずサボる
	CASE 110
		CALL ロケーション選択
	CASE 111
		CALL 友人と遊びに行く
	CASE 112
		CALL 家に友人を呼ぶ
	CASE 113
		CALL バイトに行く
	CASE 114
		CALL バイトを探す
	CASE 200
		CALL 学園モード_汎用会話, 同行者
	CASE 201
		CALL アダルトサイト閲覧
	CASE 202
		CALL 思い切った提案
	CASE 203
		CALL ロケーション選択
	CASE 210
		CALL 面倒を見てもらう
	CASE 211
		CALL 看病_遊びに行く
	CASE 212
		CALL 色気を出す
	CASE 220
		CALL 性的に遊ぶ
	CASE 221
		CALL ロケーション選択
	CASE 400
		CALL TURNEND_学園
	CASE 500
		CALL 学園データベース
ENDSELECT

SIF RESULT
	CALL TURNEND_学園

[SKIPSTART]
@相性増加, ARG, ARG:1, 上昇値
#DIM DYNAMIC 上昇値

;引数の2人の間の相性を上昇させる関数

RELATION:ARG:(ARG:1) += 上昇値
RELATION:(ARG:1):ARG += 上昇値
[SKIPEND]
