@ロケーション_自宅
;日数表示
CALL カラム生成, "自宅", "コマンド"

@自宅_コマンド
#DIM DYNAMIC 滞在者

CALL COLUMNSHOP_SCHOOL

CALL COLUMNDRAWLINE, 0
CALL COLUMNPRINTL, 0, @"□何をしよう？"
SELECTCASE ターン
	CASE "朝"
		SELECTCASE DOW(FLAG:曜日)
			CASE "土", "日"
				CALL COLUMNPRINTL, 0, "　[100] - 遊びに行く"
				CALL COLUMNPRINTL, 0, "　[101] - 友人と遊びに行く"
				CALL COLUMNPRINTL, 0, "　[102] - 家に友人を呼ぶ"
				IF バイト先 != ""
					バイト可能 = 0
					TRYCALLFORM バイト条件_%バイト先%
					IF バイト可能
						CALL COLUMNPRINTL, 0, @"　[103] - %バイト先%のバイトに行く"
					ELSE
						CALL COLUMNPRINTL, 0, @"　[---] - %バイト先%のシフトは入っていません", "gray"
					ENDIF
				ELSE
					CALL COLUMNPRINTL, 0, "　[104] - バイトを探す"
				ENDIF
				CALL COLUMNPRINTL, 0, "　[105] - 家で過ごす"
			CASEELSE
				CALL COLUMNPRINTL, 0, "　[100] - 学校へ行く "
				CALL COLUMNPRINTL, 0, "　[101] - クラスメイトと一緒に登校する"
				CALL COLUMNPRINTL, 0, "　[102] - 学校の保健室へ行く"
				CALL COLUMNPRINTL, 0, "　[103] - 他の学校に行く"
				CALL COLUMNPRINTL, 0, "　[104] - 何もせずサボる"
		ENDSELECT
	CASE "昼", "夕"
		滞在者 = FINDCHARA(CSTR:現在地, @"%CALLNAME:PLAYER%の家", 1)
		IF 滞在者 > 0
			SELECTCASE CSTR:滞在者:目的
				CASE "遊び"
					CALL COLUMNPRINTL, 0, @"　[200] - %CALLNAME:滞在者%と会話する"
					CALL COLUMNPRINTL, 0, @"　[201] - %CALLNAME:滞在者%とアダルトサイトを見る"
					CALL COLUMNPRINTL, 0, @"　[202] - %CALLNAME:滞在者%に思い切った提案をする"
					CALL COLUMNPRINTL, 0, @"　[203] - %CALLNAME:滞在者%と遊びに行く"
				CASE "看病"
					CALL COLUMNPRINTL, 0, @"　[200] - %CALLNAME:滞在者%に面倒を見てもらう"
					CALL COLUMNPRINTL, 0, @"　[201] - %CALLNAME:滞在者%と遊びに行く"
					CALL COLUMNPRINTL, 0, @"　[202] - %CALLNAME:滞在者%に過度に甘えてみる"
					CALL COLUMNPRINTL, 0, @"　[203] - %CALLNAME:滞在者%に「体が熱い」と色気を出す"
				CASE "セックス"
					CALL COLUMNPRINTL, 0, @"　[200] - %CALLNAME:滞在者%と（性的に）遊ぶ"
					CALL COLUMNPRINTL, 0, @"　[201] - %CALLNAME:滞在者%と（性的な）遊びに行く"
					CALL COLUMNPRINTL, 0, @"　[202] - %CALLNAME:滞在者%と健全に過ごす"
			ENDSELECT
		ELSE
			CALL COLUMNPRINTL, 0, "　[200] - 遊びに行く"
			CALL COLUMNPRINTL, 0, "　[201] - 友人と遊びに行く"
			CALL COLUMNPRINTL, 0, "　[202] - 家に友人を呼ぶ"
			IF バイト先 != ""
				バイト可能 = 0
				TRYCALLFORM バイト条件_%バイト先%
				IF バイト可能
					CALL COLUMNPRINTL, 0, @"　[203] - %バイト先%のバイトに行く"
				ELSE
					CALL COLUMNPRINTL, 0, @"　[---] - %バイト先%のシフトは入っていません", "gray"
				ENDIF
			ELSE
				CALL COLUMNPRINTL, 0, "　[204] - バイトを探す"
			ENDIF
			CALL COLUMNPRINTL, 0, "　[205] - 家で過ごす"
		ENDIF
	CASE "夜"
		滞在者 = FINDCHARA(CSTR:現在地, @"%CALLNAME:PLAYER%の家", 1)
		IF 滞在者 > 0
			SELECTCASE CSTR:滞在者:目的
				CASE "遊び"
					CALL COLUMNPRINTL, 0, @"　[300] - %CALLNAME:滞在者%と会話する"
					CALL COLUMNPRINTL, 0, @"　[301] - %CALLNAME:滞在者%とアダルトサイトを見る"
					CALL COLUMNPRINTL, 0, @"　[302] - %CALLNAME:滞在者%に思い切った提案をする"
					CALL COLUMNPRINTL, 0, @"　[303] - %CALLNAME:滞在者%と遊びに行く"
				CASE "看病"
					CALL COLUMNPRINTL, 0, @"　[300] - %CALLNAME:滞在者%に面倒を見てもらう"
					CALL COLUMNPRINTL, 0, @"　[301] - %CALLNAME:滞在者%と遊びに行く"
					CALL COLUMNPRINTL, 0, @"　[302] - %CALLNAME:滞在者%に「体が熱い」と色気を出す"
				CASE "セックス"
					CALL COLUMNPRINTL, 0, @"　[300] - %CALLNAME:滞在者%と（性的に）遊ぶ"
					CALL COLUMNPRINTL, 0, @"　[301] - %CALLNAME:滞在者%と（性的な）遊びに行く"
					CALL COLUMNPRINTL, 0, @"　[302] - %CALLNAME:滞在者%と健全に過ごす"
			ENDSELECT
		ELSE
			CALL COLUMNPRINTL, 0, "　[300] - 遊びに行く"
			IF バイト先 != ""
				バイト可能 = 0
				TRYCALLFORM バイト条件_%バイト先%
				IF バイト可能
					CALL COLUMNPRINTL, 0, @"　[301] - %バイト先%のバイトに行く"
				ELSE
					CALL COLUMNPRINTL, 0, @"　[---] - %バイト先%のシフトは入っていません", "gray"
				ENDIF
			ELSE
				CALL COLUMNPRINTL, 0, "　[302] - バイトを探す"
			ENDIF
			CALL COLUMNPRINTL, 0, "　[303] - 寝る"
		ENDIF
ENDSELECT
CALL COLUMNPRINTL, 0, "　[500] - データベース"


@自宅_コマンド_INPUT
#DIM DYNAMIC LRESULT
#DIM DYNAMIC 滞在者
滞在者 = FINDCHARA(CSTR:現在地, @"%CALLNAME:PLAYER%の家", 1)

LRESULT = CRESULT:1
SELECTCASE LRESULT
	CASE 100 TO 199
		SIF ターン != "朝"
			RETURN
		SELECTCASE DOW(FLAG:曜日)
			CASE "土", "日"
				SELECTCASE LRESULT
					CASE 100
						CALL ロケーション選択
					CASE 101
						CALL 友人と遊びに行く
					CASE 102
						CALL 家に友人を呼ぶ
					CASE 103
						CALL バイトに行く
					CASE 104
						CALL バイトを探す
					CASE 105
						;CALL 家で過ごす
				ENDSELECT
			CASEELSE
				SELECTCASE LRESULT
					CASE 100
						CALL 朝_学校へ行く
					CASE 101
						CALL 朝_クラスメイトと一緒に登校する
					CASE 102
						CALL 朝_学校の保健室に行く
					CASE 103
						CALL 朝_他の学校に行く
					CASE 104
						CALL 朝_何もせずサボる
					CASEELSE
						RETURN
				ENDSELECT
		ENDSELECT
		;コマンド系関数はRETURN 1でターン終了
		SIF RESULT
			JUMP TURNEND_学園
	CASE 200 TO 299
		SIF ターン != "昼" && ターン != "夕"
			RETURN
		IF 滞在者 > 0
			SELECTCASE CSTR:滞在者:目的
				CASE "遊び"
					SELECTCASE LRESULT
						CASE 200
							CALL 学園モード_汎用会話, 同行者
						CASE 201
							CALL アダルトサイト閲覧
						CASE 202
							CALL 思い切った提案
						CASE 203
							CALL ロケーション選択
					ENDSELECT
				CASE "看病"
					SELECTCASE LRESULT
						CASE 200
							CALL 面倒を見てもらう
						CASE 201
							CALL 看病_遊びに行く
						CASE 202
							CALL 色気を出す
					ENDSELECT
				CASE "セックス"
					SELECTCASE LRESULT
						CASE 200
							CALL 性的に遊ぶ
						CASE 201
							CALL ロケーション選択
						CASE 202
							;CALL 健全に過ごす
					ENDSELECT
			ENDSELECT
		ELSE
			SELECTCASE LRESULT
				CASE 200
					CALL ロケーション選択
				CASE 201
					CALL 友人と遊びに行く
				CASE 202
					CALL 家に友人を呼ぶ
				CASE 203
					CALL バイトに行く
				CASE 204
					CALL バイトを探す
			ENDSELECT
		ENDIF
		SIF RESULT
			JUMP TURNEND_学園
	CASE 300 TO 301
		SIF ターン != "夜"
			RETURN
		SELECTCASE LRESULT 
			CASE 300
				CALL ロケーション選択
			CASE 301
			CASE 302
				CALL バイトに行く
			CASE 303
				CALL バイトを探す
		ENDSELECT
		SIF RESULT
			JUMP TURNEND_学園
	CASE 500
		CALL 学園データベース
ENDSELECT

@相性増加, ARG, ARG:1, 上昇値
#DIM DYNAMIC 上昇値

;引数の2人の間の相性を上昇させる関数

RELATION:ARG:(ARG:1) += 上昇値
RELATION:(ARG:1):ARG += 上昇値
