;-------------------------------------------------
;尿道カテーテル
;-------------------------------------------------
@USERCOM_ABLE_尿道カテーテル
#FUNCTION
#DIM DYNAMIC 条件確定

コマンド実行条件 += "小スカMODが必要/"
SIF !MOD:SCAT2
	COMRESULT = 0
;上級売春中は不可
コマンド実行条件 += "上級売春中は実行不可/"
SIF 上級売春中
	COMRESULT = 0
;ゲーセンに居る場合はトイレじゃないとできない
コマンド実行条件 += "ゲーセンではトイレじゃないと実行できない/"
SIF TEQUIP:ゲームセンター && !TEQUIP:トイレ
	COMRESULT = 0
;アイテムないとダメ
コマンド実行条件 += "アイテム[尿道カテーテル]が必要/"
SIF !ITEM:尿道カテーテル
	COMRESULT = 0
;服着てるとダメ
コマンド実行条件 += "性器が露出していないと実行できない/"
SIF !性器露出(TARGET)
	COMRESULT = 0
;解除はいつでも可能
SIF TEQUIP:尿道カテーテル && COMRESULT
	条件確定 = 1

;ペニバン使用中はダメ
コマンド実行条件 += "対象がペニスバンド装着中は実行不可/"
SIF TEQUIP:ペニスバンド
	COMRESULT = 0
;オナホ使用中もダメ
コマンド実行条件 += "対象がオナホール装着中は実行できない/"
SIF TEQUIP:オナホール
	COMRESULT = 0
;搾精機
コマンド実行条件 += "対象が搾精機装着中は実行できない/"
SIF TEQUIP:搾精器
	COMRESULT = 0
;避妊具
コマンド実行条件 += "対象が避妊具装着中は実行できない/"
SIF TEQUIP:コンドーム || TEQUIP:搾精コンドーム
	COMRESULT = 0
コマンド実行条件 += "尿道使用中は実行不可/"
SIF Ｕ使用中(TARGET)
	COMRESULT = 0

IF 条件確定
	COMRESULT = 1
	RETURNF 1
ENDIF
RETURNF COMRESULT

@COM_尿道カテーテル
PRINTL 尿道カテーテル
CALL KOJO_MESSAGE_COM

;着脱の処理
INVERTBIT TEQUIP:尿道カテーテル, 0

;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
LOSEBASE:体力 += 50
LOSEBASE:気力 += 80

SOURCE:屈従 = 200
SOURCE:苦痛 = 1000
SOURCE:恐怖 = 500
SOURCE:露出 = 300
SOURCE:逸脱 = 1000
SOURCE:反感 = 800
SOURCE:不潔 = 500

;-------------------------------------------------
;絶頂チェック
;-------------------------------------------------
CALL SOURCE_CHECK_CVAB

;-------------------------------------------------
;射精チェック
;-------------------------------------------------
CALL SAMEN_CHECK_T, 0

CALL SAMEN_SHOOT_T, 0, NOWEX:射精

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
CALL EXPUP, "尿道経験", 2
SIF PENIS(TARGET)
	CALL EXPUP, "射精管理経験", 1
CALL EXPUP, "医療経験", 2, PLAYER

;利尿剤効果は0になる
SIF TEQUIP:尿道カテーテル
	TEQUIP:利尿剤 = 0

RETURN 1

;-------------------------------------------------
;装着継続の処理
;-------------------------------------------------
@EQUIP_COM_尿道カテーテル
PRINTL ＜尿道カテーテル挿入中＞

LOSEBASE:体力 += 30
LOSEBASE:気力 += 50

SOURCE:屈従 = 100
SOURCE:苦痛 = 700
SOURCE:恐怖 = 300
SOURCE:露出 = 100
SOURCE:逸脱 = 300
SOURCE:反感 = 500
SOURCE:不潔 = 200

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
IF SELECTCOMS != "尿道カテーテル"
	CALL EXPUP, "尿道経験", 1
	CALL EXPUP, "医療経験", 1, PLAYER
ENDIF

RETURN 1
