@ABLUP4
#DIM DYNAMIC LCOUNT
SIF ABL:Ｖ感覚 == 10 && !TALENT:リミットバースト
	RETURN 0
SIF ABL:Ｖ感覚 < 0
	RETURN 0
CALL NEED_JUEL_Ｖ感覚
CALL CHECK_JUEL_Ｖ感覚
IF RESULT
	CALL NEED_JUEL_Ｖ感覚
	FOR LCOUNT, 0, 15
		JUEL:LCOUNT -= ABLUP:LCOUNT
	NEXT
	ABL:Ｖ感覚++
ENDIF

@NEED_JUEL_Ｖ感覚
SELECTCASE ABL:Ｖ感覚
	CASE 0
		ABLUP:GETPALAM("快Ｖ") = 1
		ABLUPEXP:GETEXP("Ｖ経験") = 2
	CASE 1
		ABLUP:GETPALAM("快Ｖ") = 20
		ABLUPEXP:GETEXP("Ｖ経験") = 10
	CASE 2
		ABLUP:GETPALAM("快Ｖ") = 400
		ABLUPEXP:GETEXP("Ｖ経験") = 30
	CASE 3
		ABLUP:GETPALAM("快Ｖ") = 5000
		ABLUPEXP:GETEXP("Ｖ経験") = 75
	CASE 4
		ABLUP:GETPALAM("快Ｖ") = 15000
		ABLUPEXP:GETEXP("Ｖ経験") = 150
	CASE 5
		ABLUP:GETPALAM("快Ｖ") = 30000
		ABLUPEXP:GETEXP("Ｖ経験") = 230
	CASE 6
		ABLUP:GETPALAM("快Ｖ") = 40000
		ABLUPEXP:GETEXP("Ｖ経験") = 270
	CASE 7
		ABLUP:GETPALAM("快Ｖ") = 50000
		ABLUPEXP:GETEXP("Ｖ経験") = 360
	CASE 8
		ABLUP:GETPALAM("快Ｖ") = 60000
		ABLUPEXP:GETEXP("Ｖ経験") = 420
	CASE 9
		ABLUP:GETPALAM("快Ｖ") = 70000
		ABLUPEXP:GETEXP("Ｖ経験") = 500
	CASE IS >= 10
		ABLUP:GETPALAM("快Ｖ") = 800 * POWER(ABL:Ｖ感覚, 2)
ENDSELECT

;陥落素質での補正
;淫乱
IF TALENT:淫乱
	TIMES ABLUP:GETPALAM("快Ｖ") , 0.80
	TIMES ABLUPEXP:GETEXP("Ｖ経験") , 0.80
ENDIF
;娼婦
IF TALENT:娼婦
	TIMES ABLUP:GETPALAM("快Ｖ") , 0.50
	TIMES ABLUPEXP:GETEXP("Ｖ経験") , 0.50
ENDIF
;淫膣
IF TALENT:淫膣
	TIMES ABLUP:GETPALAM("快Ｖ") , 0.80
	TIMES ABLUPEXP:GETEXP("Ｖ経験") , 0.80
ENDIF

@CHECK_JUEL_Ｖ感覚
;快Ｖの珠、Ｖ経験が必要
SIF JUEL:快Ｖ >= ABLUP:GETPALAM("快Ｖ") && EXP:Ｖ経験 >= ABLUPEXP:GETEXP("Ｖ経験")
	RETURN 1

;上記の条件を満たせなかったら上げられない
RETURN 0

@ABLUP_MESSAGE_Ｖ感覚
SIF JUEL:快Ｖ < ABLUP:GETPALAM("快Ｖ")
	SETCOLORBYNAME gray
PRINTFORM [快Ｖの珠×{ABLUP:GETPALAM("快Ｖ")}]
RESETCOLOR

IF ABLUPEXP:GETEXP("Ｖ経験")
	SIF EXP:Ｖ経験 < ABLUPEXP:GETEXP("Ｖ経験")
		SETCOLORBYNAME gray
	PRINTFORM [Ｖ経験{ABLUPEXP:GETEXP("Ｖ経験")}以上]
	RESETCOLOR
ENDIF

