@ABLUP90
CALL NEED_JUEL_苦痛刻印
CALL CHECK_JUEL_苦痛刻印
IF RESULT
	CALL NEED_JUEL_苦痛刻印
	REPEAT 15
		JUEL:COUNT -= ABLUP:COUNT
	REND
	MARK:苦痛刻印--
ENDIF

@NEED_JUEL_苦痛刻印
SELECTCASE MARK:苦痛刻印
	CASE 1
		ABLUP:GETPALAM("恭順") = 1000
	CASE 2
		ABLUP:GETPALAM("恭順") = 3000
	CASE 3
		ABLUP:GETPALAM("恭順") = 5000
ENDSELECT

SIF TALENT:臆病
	TIMES ABLUP:GETPALAM("恭順") , 1.20

SIF TALENT:痛みに弱い
	TIMES ABLUP:GETPALAM("恭順") , 1.20

SIF TALENT:マゾ
	TIMES ABLUP:GETPALAM("恭順") , 0.80

SIF TALENT:痛みに強い
	TIMES ABLUP:GETPALAM("恭順") , 0.80

IF CFLAG:陥落
	TIMES ABLUP:GETPALAM("恭順") , 0.20
ELSEIF CFLAG:状態 >= 2
	TIMES ABLUP:GETPALAM("恭順") , 0.80
ENDIF

@CHECK_JUEL_苦痛刻印
;苦痛刻印無ければ戻る
SIF !MARK:苦痛刻印
	RETURN 0

;苦痛刻印Lvと同じLvの奉仕精神が必要
SIF ABL:奉仕精神 < MARK:苦痛刻印
	RETURN 0

;恭順の珠で減らす
SIF JUEL:恭順 >= ABLUP:GETPALAM("恭順")
	RETURN 1

RETURN 0

@ABLUP_MESSAGE_苦痛刻印
;苦痛刻印刻印Lvと同じLvの奉仕精神が必要
SIF ABL:奉仕精神 < MARK:苦痛刻印
	SETCOLORBYNAME gray
PRINTFORM [奉仕精神LV{MARK:苦痛刻印}以上]
RESETCOLOR

SIF JUEL:恭順 < ABLUP:GETPALAM("恭順")
	SETCOLORBYNAME gray
PRINTFORM [恭順の珠×{ABLUP:GETPALAM("恭順")}]
RESETCOLOR

