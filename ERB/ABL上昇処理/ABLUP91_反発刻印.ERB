@ABLUP91
#DIM DYNAMIC LCOUNT
CALL NEED_JUEL_反発刻印
CALL CHECK_JUEL_反発刻印
IF RESULT
	CALL NEED_JUEL_反発刻印
	FOR LCOUNT, 0, 15
		JUEL:LCOUNT -= ABLUP:LCOUNT
	NEXT
	MARK:反発刻印--
ENDIF

@NEED_JUEL_反発刻印
SELECTCASE MARK:反発刻印
	CASE 1
		ABLUP:GETPALAM("屈服") = 1000
	CASE 2
		ABLUP:GETPALAM("屈服") = 3000
	CASE 3
		ABLUP:GETPALAM("屈服") = 10000
ENDSELECT

SIF TALENT:臆病
	TIMES ABLUP:GETPALAM("屈服") , 0.50

SIF TALENT:反抗的
	TIMES ABLUP:GETPALAM("屈服") , 3.00

SIF TALENT:気丈
	TIMES ABLUP:GETPALAM("屈服") , 1.50

SIF TALENT:素直
	TIMES ABLUP:GETPALAM("屈服") , 0.50

SIF TALENT:プライド高い
	TIMES ABLUP:GETPALAM("屈服") , 2.00

SIF TALENT:生意気
	TIMES ABLUP:GETPALAM("屈服") , 2.00

SIF TALENT:プライド低い
	TIMES ABLUP:GETPALAM("屈服") , 0.50

SELECTCASE ABL:従順
	CASE 1
		TIMES ABLUP:GETPALAM("屈服") , 0.98
	CASE 2
		TIMES ABLUP:GETPALAM("屈服") , 0.96
	CASE 3
		TIMES ABLUP:GETPALAM("屈服") , 0.94
	CASE 4
		TIMES ABLUP:GETPALAM("屈服") , 0.92
	CASE 5
		TIMES ABLUP:GETPALAM("屈服") , 0.90
	CASE 6
		TIMES ABLUP:GETPALAM("屈服") , 0.88
	CASE 7
		TIMES ABLUP:GETPALAM("屈服") , 0.86
	CASE 8
		TIMES ABLUP:GETPALAM("屈服") , 0.84
	CASE 9
		TIMES ABLUP:GETPALAM("屈服") , 0.82
	CASE IS >= 10
		TIMES ABLUP:GETPALAM("屈服") , 0.80
ENDSELECT

SELECTCASE ABL:奉仕精神
	CASE 1
		TIMES ABLUP:GETPALAM("屈服") , 0.98
	CASE 2
		TIMES ABLUP:GETPALAM("屈服") , 0.96
	CASE 3
		TIMES ABLUP:GETPALAM("屈服") , 0.94
	CASE 4
		TIMES ABLUP:GETPALAM("屈服") , 0.92
	CASE 5
		TIMES ABLUP:GETPALAM("屈服") , 0.90
	CASE 6
		TIMES ABLUP:GETPALAM("屈服") , 0.88
	CASE 7
		TIMES ABLUP:GETPALAM("屈服") , 0.86
	CASE 8
		TIMES ABLUP:GETPALAM("屈服") , 0.84
	CASE 9
		TIMES ABLUP:GETPALAM("屈服") , 0.82
	CASE IS >= 10
		TIMES ABLUP:GETPALAM("屈服") , 0.80
ENDSELECT

IF CFLAG:陥落
	TIMES ABLUP:GETPALAM("屈服") , 0.20
ELSEIF CFLAG:状態 >= 2
	TIMES ABLUP:GETPALAM("屈服") , 0.80
ENDIF

@CHECK_JUEL_反発刻印
;反発刻印無ければ戻る
SIF !MARK:反発刻印
	RETURN 0

;反発刻印Lvと同じLvの屈服刻印が必要
SIF MARK:屈服刻印 < MARK:反発刻印
	RETURN 0

;反発刻印Lvと同じLvの従順が必要
SIF ABL:従順 < MARK:反発刻印
	RETURN 0

;屈服の珠で減らす
SIF JUEL:屈服 >= ABLUP:GETPALAM("屈服")
	RETURN 1

RETURN 0

@ABLUP_MESSAGE_反発刻印
;反発刻印Lvと同じLvの屈服刻印が必要
SIF MARK:屈服刻印 < MARK:反発刻印
	SETCOLORBYNAME gray
PRINTFORM [屈服刻印LV{MARK:反発刻印}以上]
RESETCOLOR

;反発刻印Lvと同じLvの従順が必要
SIF ABL:従順 < MARK:反発刻印
	SETCOLORBYNAME gray
PRINTFORM [従順LV{MARK:反発刻印}以上]
RESETCOLOR

SIF JUEL:屈服 < ABLUP:GETPALAM("屈服")
	SETCOLORBYNAME gray
PRINTFORM [屈服の珠×{ABLUP:GETPALAM("屈服")}]
RESETCOLOR

