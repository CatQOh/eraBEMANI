;ABLUP:7 = 屈服の珠必要数
@ABLUP99
CALL NEED_JUEL99
CALL CHECK_JUEL99
IF RESULT
	CALL NEED_JUEL99
	REPEAT 15
		JUEL:COUNT -= ABLUP:COUNT
	REND
	MARK:反発刻印--
ENDIF

@NEED_JUEL99
SELECTCASE MARK:反発刻印
	CASE 1
		ABLUP:7 = 1000
	CASE 2
		ABLUP:7 = 3000
	CASE 3
		ABLUP:7 = 10000
ENDSELECT

SIF TALENT:臆病
	TIMES ABLUP:7 , 0.50

SIF TALENT:反抗的
	TIMES ABLUP:7 , 3.00

SIF TALENT:気丈
	TIMES ABLUP:7 , 1.50

SIF TALENT:素直
	TIMES ABLUP:7 , 0.50

SIF TALENT:プライド高い
	TIMES ABLUP:7 , 2.00

SIF TALENT:生意気
	TIMES ABLUP:7 , 2.00

SIF TALENT:プライド低い
	TIMES ABLUP:7 , 0.50

SELECTCASE ABL:従順
	CASE 1
		TIMES ABLUP:7 , 0.98
	CASE 2
		TIMES ABLUP:7 , 0.96
	CASE 3
		TIMES ABLUP:7 , 0.94
	CASE 4
		TIMES ABLUP:7 , 0.92
	CASE 5
		TIMES ABLUP:7 , 0.90
	CASE 6
		TIMES ABLUP:7 , 0.88
	CASE 7
		TIMES ABLUP:7 , 0.86
	CASE 8
		TIMES ABLUP:7 , 0.84
	CASE 9
		TIMES ABLUP:7 , 0.82
	CASE IS >= 10
		TIMES ABLUP:7 , 0.80
ENDSELECT

SELECTCASE ABL:奉仕精神
	CASE 1
		TIMES ABLUP:7 , 0.98
	CASE 2
		TIMES ABLUP:7 , 0.96
	CASE 3
		TIMES ABLUP:7 , 0.94
	CASE 4
		TIMES ABLUP:7 , 0.92
	CASE 5
		TIMES ABLUP:7 , 0.90
	CASE 6
		TIMES ABLUP:7 , 0.88
	CASE 7
		TIMES ABLUP:7 , 0.86
	CASE 8
		TIMES ABLUP:7 , 0.84
	CASE 9
		TIMES ABLUP:7 , 0.82
	CASE IS >= 10
		TIMES ABLUP:7 , 0.80
ENDSELECT

IF CFLAG:陥落
	TIMES ABLUP:7 , 0.20
ELSEIF CFLAG:状態 >= 2
	TIMES ABLUP:7 , 0.80
ENDIF

@CHECK_JUEL99
;反発刻印無ければ戻る
SIF !MARK:反発刻印
	RETURN 0

;反発刻印Lvと同じLvの屈服刻印が必要
SIF MARK:屈服刻印 < MARK:反発刻印
	RETURN 0

;反発刻印Lvと同じLvの従順が必要
SIF ABL:従順 < MARK:反発刻印
	RETURN 0

;屈服の珠で減らす
SIF JUEL:屈服 >= ABLUP:7
	RETURN 1

RETURN 0

@ABLUP_MESSAGE99
;反発刻印Lvと同じLvの屈服刻印が必要
SIF MARK:屈服刻印 < MARK:反発刻印
	SETCOLOR 120, 120, 120
PRINTFORM [屈服刻印LV{MARK:反発刻印}以上]
RESETCOLOR

;反発刻印Lvと同じLvの従順が必要
SIF ABL:従順 < MARK:反発刻印
	SETCOLOR 120, 120, 120
PRINTFORM [従順LV{MARK:反発刻印}以上]
RESETCOLOR

SIF JUEL:屈服 < ABLUP:7
	SETCOLOR 120, 120, 120
PRINTFORM [屈服の珠×{ABLUP:7}]
RESETCOLOR

