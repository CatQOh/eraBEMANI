@タイトル_MOD
#DIMS DYNAMIC HTML
SELECTCASE MODページ
	CASE 0
		CALL COLUMNPRINTL, 0, "□エクストラMODの設定ができます"
		CALL COLUMNPRINTL, 0, "　エクストラMODとは、セーブデータ全体で共有されるオプションで、"
		CALL COLUMNPRINTL, 0, "　ゲームバランスに大きな影響を及ぼしかねない機能をあえて解禁することで、遊びの幅を広げる試みです"
		CALL COLUMNPRINTL, 0, "　必要に応じて設定してください。段位認定モードでは適用されません"
		CALL COLUMNPRINTL, 0, "　また、体質変更MODは既に解禁済みのキャラにも適用されません。新たに解禁したキャラにのみ適用されます"
		CALL COLUMNPRINTL, 0, ""
		CALL COLUMNPRINTL, 0, "□性別関連MOD(新しく購入、追加したキャラにのみ適用。各MODの重複は不可)"
		CALL COLUMNPRINTL, 0, @"　[1] - MOD:男性化(現在:\@ MOD:男性化 ? オン # オフ \@) 全てのキャラが男性になる", @"\@ MOD:男性化 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[2] - MOD:女性化(現在:\@ MOD:女性化 ? オン # オフ \@) 全てのキャラが女性になる", @"\@ MOD:女性化 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[3] - MOD:性転換(現在:\@ MOD:性転換 ? オン # オフ \@) 全てのキャラが性転換する", @"\@ MOD:性転換 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, ""
		CALL COLUMNPRINTL, 0, "□体質関連MOD(新しく購入、追加したキャラにのみ適用)"
		CALL COLUMNPRINTL, 0, @"　[11] - MOD:爆乳(現在:\@ MOD:爆乳 ? オン # オフ \@) 全ての女性キャラが爆乳になる。MOD:絶壁との重複不可", @"\@ MOD:爆乳 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[12] - MOD:絶壁(現在:\@ MOD:絶壁 ? オン # オフ \@) 全ての女性キャラが絶壁になる。MOD:爆乳との重複不可", @"\@ MOD:絶壁 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[13] - MOD:母乳(現在:\@ MOD:母乳 ? オン # オフ \@) 全ての女性キャラが母乳体質になる", @"\@ MOD:母乳 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[14] - MOD:おもらし(現在:\@ MOD:おもらし ? オン # オフ \@) 全てのキャラが漏らすようになる", @"\@ MOD:おもらし ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[15] - MOD:ふたなり(現在:\@ MOD:ふたなり ? オン # オフ \@) 全てのキャラがふたなりになる", @"\@ MOD:ふたなり ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[16] - MOD:ロリショタ(現在:\@ MOD:ロリショタ ? オン # オフ \@) 全てのキャラが小柄体型になる。MOD:大人化との重複不可", @"\@ MOD:ロリショタ ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[17] - MOD:大人化(現在:\@ MOD:大人化 ? オン # オフ \@) 全てのキャラが大人体型になる。MOD:ロリショタとの重複不可", @"\@ MOD:大人化 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[18] - MOD:チャレンジ(現在:\@ MOD:チャレンジ ? オン # オフ \@) 全てのキャラの性経験が皆無になる 旧チャレンジモード", @"\@ MOD:チャレンジ ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[19] - MOD:スライム(現在:\@ MOD:スライム ? オン # オフ \@) 全てのキャラがスライムになる", @"\@ MOD:スライム ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, ""
		CALL COLUMNPRINTL, 0, "□妊娠関連MOD(既存のキャラにも適用される)"
		CALL COLUMNPRINTL, 0, @"　[31] - MOD:人口飽和(現在:\@ MOD:人口飽和 ? オン # オフ \@) 中出しした翌日に妊娠し、すぐに出産するMOD", @"\@ MOD:人口飽和 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[32] - MOD:百発百中(現在:\@ MOD:百発百中 ? オン # オフ \@) 着床する確率が100\%になるMOD", @"\@ MOD:百発百中 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, ""
		CALL COLUMNPRINTL, 0, "□その他MOD"
		HTML += COLUMNPRINTF(@"　[99] - Scrap that Slave!(現在:\@ MOD:STS ? オン # オフ \@) キャラを", @"\@ MOD:STS ? deepskyblue #\@")
		HTML += COLUMNPRINTF("解体", "red")
		HTML += COLUMNPRINTF("して血液やDNAデータ、その他リソースを回収できるようにする", @"\@ MOD:STS ? deepskyblue #\@")
		CALL COLUMNPRINTL, 0, HTML
	CASE 1
		CALL COLUMNPRINTL, 0, "□陥落素質MOD(新しく購入、追加したキャラにのみ適用。各MODの重複は不可。一度適用されたセーブでは実績解除不可)"
		CALL COLUMNPRINTL, 0, @"　[51] MOD:恋慕(現在:\@ MOD:恋慕 ? オン # オフ \@ キャラが最初から恋慕状態になる)", @"\@ MOD:恋慕 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[52] MOD:淫乱(現在:\@ MOD:淫乱 ? オン # オフ \@ キャラが最初から淫乱状態になる)", @"\@ MOD:淫乱 ? deepskyblue #\@"
		CALL COLUMNPRINTL, 0, @"　[53] MOD:服従(現在:\@ MOD:服従 ? オン # オフ \@ キャラが最初から服従状態になる)", @"\@ MOD:服従 ? deepskyblue #\@"
ENDSELECT
CALL COLUMNDRAWLINE, 0
CALL COLUMNPRINT, 0, @"%RETURNSPACE(MODページ > 0, "[101] 前ページ ")%"
CALL COLUMNPRINT, 0, @"%RETURNSPACE(MODページ < 1, "[109] 次ページ")%"
CALL COLUMNPRINTL, 0, ""

@タイトル_MOD_INPUT
SELECTCASE CRESULT:1
	CASE 101
		MODページ--
	CASE 109
		MODページ++
	CASE 1
		INVERTBIT MOD:男性化, 0
		MOD:女性化 = 0
		MOD:性転換 = 0
	CASE 2
		INVERTBIT MOD:女性化, 0
		MOD:男性化 = 0
		MOD:性転換 = 0
	CASE 3
		INVERTBIT MOD:性転換, 0
		MOD:男性化 = 0
		MOD:女性化 = 0
	CASE 11
		INVERTBIT MOD:爆乳, 0
		MOD:絶壁 = 0
	CASE 12
		INVERTBIT MOD:絶壁, 0
		MOD:爆乳 = 0
	CASE 16
		INVERTBIT MOD:ロリショタ, 0
		MOD:大人化 = 0
	CASE 17
		INVERTBIT MOD:大人化, 0
		MOD:ロリショタ = 0
	CASE 51
		INVERTBIT MOD:恋慕, 0
		MOD:淫乱 = 0
		MOD:服従 = 0
	CASE 52
		INVERTBIT MOD:淫乱, 0
		MOD:恋慕 = 0
		MOD:服従 = 0
	CASE 53
		INVERTBIT MOD:服従, 0
		MOD:恋慕 = 0
		MOD:淫乱 = 0
	CASEELSE
		INVERTBIT MOD:(CRESULT:1), 0
ENDSELECT
SAVEGLOBAL

@MOD情報セーブ
SIF MOD:恋慕 || MOD:淫乱 || MOD:服従
	実績解除不可 = 1

@SHOW_MODS
#DIMS DYNAMIC 表示用変数 = "　"
#DIM DYNAMIC LCOUNT

FOR LCOUNT, 0, VARSIZE("ERD")
	SIF MOD:LCOUNT
		表示用変数 += @"[MOD:%ERDNAME(MOD, LCOUNT)%]"
NEXT

IF 表示用変数 != "　"
	CALL CHECKDRAWLINE
	PRINTL □適用中のMOD
	PRINTFORML %表示用変数%
	DRAWLINE
ENDIF

@APPLY_MOD_男性化, 対象
#DIM DYNAMIC 対象
#DIM DYNAMIC LTARGET

LTARGET = TARGET
TARGET = 対象

IF TALENT:性別 == 2
	TALENT:性別 = 1
	;以下MOD:ふたなりが入ってなければ適用
	IF !MOD:ふたなり
		IF TALENT:処女
			TALENT:童貞 = 1
			TALENT:処女 = 0
		ELSE
			CSTR:童貞 = %CSTR:処女%
			CSTR:処女 = 
		ENDIF
		IF TALENT:濡れやすい
			TALENT:勃ちやすい = 1
			TALENT:濡れやすい = 0
		ENDIF
		IF TALENT:濡れにくい
			TALENT:勃ちにくい = 1
			TALENT:濡れにくい = 0
		ENDIF
		;消す要素
		EXP:Ｖ経験 = 0
		EXP:膣射経験 = 0
		EXP:Ｖ拡張経験 = 0
		EXP:出産経験 = 0
		EXP:流産経験 = 0
		ABL:Ｖ感覚 = 0
		TALENT:Ｖ敏感 = 0
		TALENT:Ｖ鈍感 = 0
		;性経験履歴 経験回数、人数以外はリセットで
		VARSET 中出し回数
		VARSET アナル中出し回数
		VARSET 孕ませ回数
		VARSET 中出され回数
		VARSET アナル中出され回数
		VARSET 孕み回数

		VARSET モブ中出し回数
		VARSET モブアナル中出し回数
		VARSET モブ孕ませ回数
		VARSET モブ中出され回数
		VARSET モブアナル中出され回数
		VARSET モブ孕み回数
	ENDIF
	;性別変わって適応される要素
	EXP:射精経験 += EXP:絶頂経験
	EXP:ゲイ経験 += EXP:レズ経験
	EXP:レズ経験 = 0
	IF !EXP:ゲイ経験
		EXP:精液経験 = 0
		EXP:フェラ経験 = 0
		EXP:Ａ拡張経験 = 0
	ENDIF
	ABL:ホモっ気 += ABL:レズっ気
	ABL:レズっ気 = 0
	ABL:ゲイ中毒 += ABL:レズ中毒
	ABL:レズ中毒 = 0
	
	;消す要素
	EXP:噴乳経験 = 0
	EXP:パイズリ経験 = 0
	ABL:噴乳中毒 = 0
	TALENT:母性 = 0
	TALENT:母乳体質 = 0
	TALENT:バストサイズ = 0

	CSTR:適用MOD += "[MOD:男性化]"
ENDIF

TARGET = LTARGET

@APPLY_MOD_女性化, 対象
#DIM DYNAMIC 対象
#DIM DYNAMIC LTARGET

LTARGET = TARGET
TARGET = 対象

IF TALENT:性別 == 1
	TALENT:性別 = 2
	;以下MOD:ふたなりが入ってなければ適用
	IF !MOD:ふたなり
		IF TALENT:童貞
			TALENT:処女 = 1
			TALENT:童貞 = 0
		ELSE
			CSTR:処女 = %CSTR:童貞%
			CSTR:童貞 = 
		ENDIF
		IF TALENT:勃ちやすい
			TALENT:濡れやすい = 1
			TALENT:勃ちやすい = 0
		ENDIF
		IF TALENT:勃ちにくい
			TALENT:濡れにくい = 1
			TALENT:勃ちにくい = 0
		ENDIF
		;性別変わって適応される要素
		EXP:絶頂経験 += EXP:射精経験
		EXP:射精経験 = 0
		SIF !TALENT:処女
			EXP:Ｖ経験 += EXP:性交経験
		;消す要素
		EXP:射精経験 = 0
		;性経験履歴 経験回数、人数以外はリセットで
		VARSET 中出し回数
		VARSET アナル中出し回数
		VARSET 孕ませ回数
		VARSET 中出され回数
		VARSET アナル中出され回数
		VARSET 孕み回数

		VARSET モブ中出し回数
		VARSET モブアナル中出し回数
		VARSET モブ孕ませ回数
		VARSET モブ中出され回数
		VARSET モブアナル中出され回数
		VARSET モブ孕み回数
	ENDIF

	EXP:レズ経験 += EXP:ゲイ経験
	EXP:ゲイ経験 = 0
	ABL:レズっ気 += ABL:ホモっ気
	ABL:ホモっ気 = 0
	ABL:レズ中毒 += ABL:ゲイ中毒
	ABL:ゲイ中毒 = 0
	IF TALENT:小柄体型
		TALENT:バストサイズ = 2
	ELSE
		TALENT:バストサイズ = 3
	ENDIF
	ABL:メス度 = 0

	CSTR:適用MOD += "[MOD:女性化]"
ENDIF

TARGET = LTARGET

@APPLY_MOD_性転換, 対象
#DIM DYNAMIC 対象
#DIM DYNAMIC LTARGET

LTARGET = TARGET
TARGET = 対象

SELECTCASE TALENT:性別
	CASE 1
		CALL APPLY_MOD_女性化, TARGET
	CASE 2
		CALL APPLY_MOD_男性化, TARGET
ENDSELECT

CSTR:適用MOD += "[MOD:性転換]"

TARGET = LTARGET

@APPLY_MOD_ふたなり, 対象
#DIM DYNAMIC 対象

IF !TALENT:対象:ふたなり
	TALENT:対象:ふたなり = 1
	SELECTCASE SEX(対象)
		CASE 1
			TALENT:対象:処女 = 1
		CASE 2
			TALENT:対象:童貞 = 1
	ENDSELECT
	CSTR:対象:適用MOD += "[MOD:ふたなり]"
ENDIF

@APPLY_MOD_爆乳, 対象
#DIM DYNAMIC 対象

IF SEX(対象) == 2 && TALENT:対象:バストサイズ < 6
	TALENT:対象:バストサイズ = 6
	CSTR:対象:適用MOD += "[MOD:爆乳]"
ENDIF

@APPLY_MOD_絶壁, 対象
#DIM DYNAMIC 対象

IF SEX(対象) == 2 && TALENT:対象:バストサイズ > 1
	TALENT:対象:バストサイズ = 1
	CSTR:対象:適用MOD += "[MOD:絶壁]"
ENDIF

@APPLY_MOD_母乳, 対象
#DIM DYNAMIC 対象

IF SEX(対象) == 2
	TALENT:対象:母乳体質 = 1
	CSTR:対象:適用MOD += "[MOD:母乳]"
ENDIF

@APPLY_MOD_おもらし, 対象
#DIM DYNAMIC 対象

IF !TALENT:対象:おもらし癖
	TALENT:対象:おもらし癖 = 1
	CSTR:対象:適用MOD += "[MOD:おもらし]"
ENDIF

@APPLY_MOD_ロリショタ, 対象
#DIM DYNAMIC 対象

IF !TALENT:対象:小柄体型
	TALENT:対象:小柄体型 = 1
	CSTR:対象:適用MOD += "[MOD:ロリショタ]"
ENDIF

@APPLY_MOD_大人化, 対象
#DIM DYNAMIC 対象

IF TALENT:対象:小柄体型
	TALENT:対象:小柄体型 = 0
	CSTR:対象:適用MOD += "[MOD:大人化]"
ENDIF

@APPLY_MOD_スライム, 対象
#DIM DYNAMIC 対象

IF !TALENT:対象:スライム && !TALENT:対象:溶ける快
	TALENT:対象:スライム = 1
	CSTR:対象:種族 = スライム
	CSTR:対象:適用MOD += "[MOD:スライム]"
ENDIF

@APPLY_MOD_恋慕, 対象
#DIM DYNAMIC 対象

TALENT:対象:恋慕 = 1
CSTR:対象:適用MOD += "[MOD:恋慕]"

@APPLY_MOD_淫乱, 対象
#DIM DYNAMIC 対象

TALENT:対象:淫乱 = 1
CSTR:対象:適用MOD += "[MOD:淫乱]"

@APPLY_MOD_服従, 対象
#DIM DYNAMIC 対象

TALENT:対象:服従 = 1
CSTR:対象:適用MOD += "[MOD:服従]"
