;気温を算出する関数
;小数第1位まで計算するので、10倍した値で計算
;[平均値]に-4.9～+4.9の変動値をつけて気温とする
;夜の場合、昼の値に最大-3.9の補正のみをつける

@TEMPERATURE

;[平均値]の算出
;気象庁より1981年～2010年の東京の平均気温データを利用
;最高26.7℃ 最低4.9℃
#DIM DYNAMIC AVERAGE
#DIM DYNAMIC 夜補正

IF TIME == 0
	SELECTCASE MONTH
		CASE 1
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 58
				CASE 2
					AVERAGE = 57
				CASE 3, 4
					AVERAGE = 56
				CASE 5, 6
					AVERAGE = 55
				CASE 7 TO 9
					AVERAGE = 54
				CASE 10 TO 12
					AVERAGE = 53
				CASE 13, 14
					AVERAGE = 52
				CASE 15 TO 17
					AVERAGE = 51
				CASE 18 TO 20
					AVERAGE = 50
				CASE 21 TO 30
					AVERAGE = 49
				CASE 31
					AVERAGE = 50
			ENDSELECT
		CASE 2
			SELECTCASE DAYS
				CASE 1, 2
					AVERAGE = 50
				CASE 3, 4
					AVERAGE = 51
				CASE 5
					AVERAGE = 52
				CASE 6
					AVERAGE = 53
				CASE 7
					AVERAGE = 54
				CASE 8, 9
					AVERAGE = 55
				CASE 10
					AVERAGE = 56
				CASE 11 TO 13
					AVERAGE = 57
				CASE 14 TO 17
					AVERAGE = 58
				CASE 18 TO 20
					AVERAGE = 59
				CASE 21, 22
					AVERAGE = 60
				CASE 23
					AVERAGE = 61
				CASE 24
					AVERAGE = 62
				CASE 25
					AVERAGE = 63
				CASE 26
					AVERAGE = 64
				CASE 27
					AVERAGE = 65
				CASE 28
					AVERAGE = 66
				CASE 29
					AVERAGE = 67
			ENDSELECT
		CASE 3
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 67
				CASE 2
					AVERAGE = 69
				CASE 3
					AVERAGE = 70
				CASE 4
					AVERAGE = 71
				CASE 5
					AVERAGE = 72
				CASE 6
					AVERAGE = 73
				CASE 7
					AVERAGE = 75
				CASE 8
					AVERAGE = 77
				CASE 9
					AVERAGE = 78
				CASE 10
					AVERAGE = 79
				CASE 11
					AVERAGE = 81
				CASE 12
					AVERAGE = 82
				CASE 13
					AVERAGE = 84
				CASE 14
					AVERAGE = 85
				CASE 15
					AVERAGE = 87
				CASE 16
					AVERAGE = 88
				CASE 17
					AVERAGE = 89
				CASE 18
					AVERAGE = 90
				CASE 19
					AVERAGE = 91
				CASE 20
					AVERAGE = 92
				CASE 21
					AVERAGE = 93
				CASE 22
					AVERAGE = 94
				CASE 23
					AVERAGE = 95
				CASE 24
					AVERAGE = 96
				CASE 25
					AVERAGE = 97
				CASE 26
					AVERAGE = 99
				CASE 27
					AVERAGE = 100
				CASE 28
					AVERAGE = 102
				CASE 29
					AVERAGE = 104
				CASE 30
					AVERAGE = 106
				CASE 31
					AVERAGE = 108
			ENDSELECT
		CASE 4
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 110
				CASE 2
					AVERAGE = 113
				CASE 3
					AVERAGE = 115
				CASE 4
					AVERAGE = 118
				CASE 5
					AVERAGE = 120
				CASE 6
					AVERAGE = 122
				CASE 7
					AVERAGE = 124
				CASE 8
					AVERAGE = 127
				CASE 9
					AVERAGE = 129
				CASE 10
					AVERAGE = 130
				CASE 11
					AVERAGE = 132
				CASE 12
					AVERAGE = 134
				CASE 13
					AVERAGE = 135
				CASE 14
					AVERAGE = 137
				CASE 15
					AVERAGE = 139
				CASE 16
					AVERAGE = 140
				CASE 17
					AVERAGE = 142
				CASE 18
					AVERAGE = 144
				CASE 19
					AVERAGE = 146
				CASE 20
					AVERAGE = 147
				CASE 21
					AVERAGE = 149
				CASE 22
					AVERAGE = 151
				CASE 23
					AVERAGE = 153
				CASE 24
					AVERAGE = 154
				CASE 25
					AVERAGE = 156
				CASE 26
					AVERAGE = 158
				CASE 27
					AVERAGE = 160
				CASE 28
					AVERAGE = 161
				CASE 29
					AVERAGE = 163
				CASE 30
					AVERAGE = 165
			ENDSELECT
		CASE 5
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 166
				CASE 2
					AVERAGE = 168
				CASE 3
					AVERAGE = 169
				CASE 4
					AVERAGE = 171
				CASE 5
					AVERAGE = 172
				CASE 6
					AVERAGE = 173
				CASE 7
					AVERAGE = 174
				CASE 8
					AVERAGE = 175
				CASE 9, 10
					AVERAGE = 176
				CASE 11, 12
					AVERAGE = 177
				CASE 13
					AVERAGE = 178
				CASE 14, 15
					AVERAGE = 179
				CASE 16
					AVERAGE = 180
				CASE 17
					AVERAGE = 182
				CASE 18
					AVERAGE = 183
				CASE 19
					AVERAGE = 184
				CASE 20
					AVERAGE = 185
				CASE 21
					AVERAGE = 187
				CASE 22
					AVERAGE = 188
				CASE 23
					AVERAGE = 189
				CASE 24
					AVERAGE = 191
				CASE 25
					AVERAGE = 192
				CASE 26
					AVERAGE = 193
				CASE 27
					AVERAGE = 194
				CASE 28
					AVERAGE = 196
				CASE 29
					AVERAGE = 197
				CASE 30
					AVERAGE = 198
				CASE 31
					AVERAGE = 200
			ENDSELECT
		CASE 6
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 201
				CASE 2
					AVERAGE = 202
				CASE 3
					AVERAGE = 203
				CASE 4
					AVERAGE = 204
				CASE 5
					AVERAGE = 205
				CASE 6
					AVERAGE = 206
				CASE 7
					AVERAGE = 207
				CASE 8, 9
					AVERAGE = 208
				CASE 10
					AVERAGE = 209
				CASE 11, 12
					AVERAGE = 210
				CASE 13
					AVERAGE = 211
				CASE 14
					AVERAGE = 212
				CASE 15
					AVERAGE = 213
				CASE 16
					AVERAGE = 214
				CASE 17, 18
					AVERAGE = 215
				CASE 19
					AVERAGE = 216
				CASE 20
					AVERAGE = 217
				CASE 21
					AVERAGE = 218
				CASE 22
					AVERAGE = 219
				CASE 23, 24
					AVERAGE = 220
				CASE 25
					AVERAGE = 221
				CASE 26
					AVERAGE = 223
				CASE 27
					AVERAGE = 224
				CASE 28
					AVERAGE = 225
				CASE 29
					AVERAGE = 227
				CASE 30
					AVERAGE = 228
			ENDSELECT
		CASE 7
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 230
				CASE 2
					AVERAGE = 231
				CASE 3
					AVERAGE = 233
				CASE 4
					AVERAGE = 234
				CASE 5
					AVERAGE = 236
				CASE 6
					AVERAGE = 237
				CASE 7
					AVERAGE = 239
				CASE 8
					AVERAGE = 240
				CASE 9
					AVERAGE = 242
				CASE 10
					AVERAGE = 243
				CASE 11
					AVERAGE = 245
				CASE 12
					AVERAGE = 246
				CASE 13
					AVERAGE = 247
				CASE 14
					AVERAGE = 249
				CASE 15
					AVERAGE = 250
				CASE 16
					AVERAGE = 251
				CASE 17
					AVERAGE = 252
				CASE 18
					AVERAGE = 253
				CASE 19
					AVERAGE = 254
				CASE 20
					AVERAGE = 255
				CASE 21
					AVERAGE = 256
				CASE 22
					AVERAGE = 257
				CASE 23
					AVERAGE = 258
				CASE 24
					AVERAGE = 260
				CASE 25
					AVERAGE = 261
				CASE 26
					AVERAGE = 262
				CASE 27
					AVERAGE = 263
				CASE 28, 29
					AVERAGE = 264
				CASE 30, 31
					AVERAGE = 265
			ENDSELECT
		CASE 8
			SELECTCASE DAYS
				CASE 1 TO 3
					AVERAGE = 266
				CASE 4 TO 9
					AVERAGE = 267
				CASE 10 TO 13
					AVERAGE = 266
				CASE 14, 15
					AVERAGE = 265
				CASE 16 TO 18
					AVERAGE = 264
				CASE 19 TO 21
					AVERAGE = 263
				CASE 22 TO 24
					AVERAGE = 262
				CASE 25, 26
					AVERAGE = 261
				CASE 27
					AVERAGE = 260
				CASE 28, 29
					AVERAGE = 259
				CASE 30
					AVERAGE = 258
				CASE 31
					AVERAGE = 257
			ENDSELECT
		CASE 9
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 256
				CASE 2
					AVERAGE = 254
				CASE 3
					AVERAGE = 253
				CASE 4
					AVERAGE = 251
				CASE 5
					AVERAGE = 250
				CASE 6
					AVERAGE = 248
				CASE 7
					AVERAGE = 246
				CASE 8
					AVERAGE = 244
				CASE 9
					AVERAGE = 242
				CASE 10
					AVERAGE = 240
				CASE 11
					AVERAGE = 238
				CASE 12
					AVERAGE = 236
				CASE 13
					AVERAGE = 234
				CASE 14
					AVERAGE = 232
				CASE 15
					AVERAGE = 230
				CASE 16
					AVERAGE = 227
				CASE 17
					AVERAGE = 225
				CASE 18
					AVERAGE = 223
				CASE 19
					AVERAGE = 221
				CASE 20
					AVERAGE = 219
				CASE 21
					AVERAGE = 217
				CASE 22
					AVERAGE = 215
				CASE 23
					AVERAGE = 213
				CASE 24
					AVERAGE = 211
				CASE 25
					AVERAGE = 209
				CASE 26
					AVERAGE = 207
				CASE 27
					AVERAGE = 206
				CASE 28
					AVERAGE = 204
				CASE 29
					AVERAGE = 203
				CASE 30
					AVERAGE = 201
			ENDSELECT
		CASE 10
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 199
				CASE 2
					AVERAGE = 198
				CASE 3
					AVERAGE = 196
				CASE 4
					AVERAGE = 195
				CASE 5
					AVERAGE = 193
				CASE 6
					AVERAGE = 191
				CASE 7
					AVERAGE = 190
				CASE 8
					AVERAGE = 188
				CASE 9
					AVERAGE = 186
				CASE 10
					AVERAGE = 185
				CASE 11
					AVERAGE = 183
				CASE 12
					AVERAGE = 182
				CASE 13
					AVERAGE = 180
				CASE 14
					AVERAGE = 179
				CASE 15
					AVERAGE = 177
				CASE 16
					AVERAGE = 175
				CASE 17
					AVERAGE = 174
				CASE 18
					AVERAGE = 172
				CASE 19
					AVERAGE = 170
				CASE 20
					AVERAGE = 168
				CASE 21
					AVERAGE = 166
				CASE 22
					AVERAGE = 164
				CASE 23
					AVERAGE = 162
				CASE 24
					AVERAGE = 160
				CASE 25
					AVERAGE = 158
				CASE 26
					AVERAGE = 157
				CASE 27
					AVERAGE = 155
				CASE 28
					AVERAGE = 154
				CASE 29
					AVERAGE = 152
				CASE 30
					AVERAGE = 151
				CASE 31
					AVERAGE = 149
			ENDSELECT
		CASE 11
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 148
				CASE 2
					AVERAGE = 146
				CASE 3
					AVERAGE = 145
				CASE 4
					AVERAGE = 143
				CASE 5
					AVERAGE = 141
				CASE 6
					AVERAGE = 140
				CASE 7
					AVERAGE = 138
				CASE 8
					AVERAGE = 136
				CASE 9
					AVERAGE = 135
				CASE 10
					AVERAGE = 133
				CASE 11
					AVERAGE = 131
				CASE 12
					AVERAGE = 129
				CASE 13
					AVERAGE = 127
				CASE 14
					AVERAGE = 124
				CASE 15
					AVERAGE = 122
				CASE 16
					AVERAGE = 120
				CASE 17
					AVERAGE = 118
				CASE 18
					AVERAGE = 116
				CASE 19
					AVERAGE = 113
				CASE 20
					AVERAGE = 111
				CASE 21
					AVERAGE = 110
				CASE 22
					AVERAGE = 108
				CASE 23
					AVERAGE = 106
				CASE 24
					AVERAGE = 105
				CASE 25
					AVERAGE = 103
				CASE 26
					AVERAGE = 102
				CASE 27
					AVERAGE = 100
				CASE 28
					AVERAGE = 99
				CASE 29
					AVERAGE = 98
				CASE 30
					AVERAGE = 97
			ENDSELECT
		CASE 12
			SELECTCASE DAYS
				CASE 1
					AVERAGE = 95
				CASE 2
					AVERAGE = 94
				CASE 3
					AVERAGE = 93
				CASE 4
					AVERAGE = 92
				CASE 5
					AVERAGE = 90
				CASE 6
					AVERAGE = 89
				CASE 7
					AVERAGE = 88
				CASE 8
					AVERAGE = 86
				CASE 9
					AVERAGE = 85
				CASE 10
					AVERAGE = 84
				CASE 11
					AVERAGE = 82
				CASE 12
					AVERAGE = 81
				CASE 13
					AVERAGE = 79
				CASE 14
					AVERAGE = 78
				CASE 15
					AVERAGE = 76
				CASE 16
					AVERAGE = 75
				CASE 17
					AVERAGE = 73
				CASE 18
					AVERAGE = 72
				CASE 19
					AVERAGE = 71
				CASE 20
					AVERAGE = 70
				CASE 21
					AVERAGE = 69
				CASE 22
					AVERAGE = 68
				CASE 23
					AVERAGE = 67
				CASE 24
					AVERAGE = 66
				CASE 25
					AVERAGE = 65
				CASE 26
					AVERAGE = 64
				CASE 27
					AVERAGE = 63
				CASE 28
					AVERAGE = 62
				CASE 29
					AVERAGE = 61
				CASE 30
					AVERAGE = 60
				CASE 31
					AVERAGE = 59
			ENDSELECT
	ENDSELECT

	;[変動値]の算出
	;-4.9～+4.9の間に限定させた1次元ランダムウォーク
	;1回の計算で-3.0～+3.0のうちランダムな値だけ変動する
	;「RAND:61 - 30」で-30～+30をランダムに出している
	;このため、気温が高い日の次の日の気温も高くなりやすい
	変動値 += RAND:61 - 30
	SIF 変動値 > 49
		変動値 = 49
	SIF 変動値 < -49
		変動値 = -49
	;最後に[平均値]+[変動値]を計算しそれを気温とする
	;最高31.6℃ 最低0℃
	FLAG:気温 = AVERAGE + 変動値
ENDIF

;夜だと月に応じてさらに下がる
;昼と合わせて最高31.6℃ 最低-3.9℃
IF TIME == 1
	SELECTCASE MONTH
		CASE 1, 11, 12
			夜補正 = RAND:40
		CASE 2, 3, 10
			夜補正 = RAND:30
		CASE 4, 5, 9
			夜補正 = RAND:20
		CASE 6 TO 8
			夜補正 = RAND:10
	ENDSELECT
	FLAG:気温 -= 夜補正
ENDIF

