@SHOP_SCHOOL
;学園モードのSHOP画面 ここを噛ませて各ロケーション関数に飛ぶ

MAX_LINE = 32

SIF CSTR:PLAYER:現在地 == ""
	CSTR:PLAYER:現在地 = 自宅

;まず「%ロケーション名%_コマンド」関数があるか確認
IF EXISTFUNCTION(@"%CSTR:PLAYER:現在地%_コマンド")
	;あればそれをベースにカラム生成 セーブやロードなどの必須カラムも一緒に
	CALL カラム生成, CSTR:PLAYER:現在地, "コマンド", "学園用_セーブカラム", "学園用_ロードカラム"
ELSE
	;無ければ汎用カラム
	CALL カラム生成, "学園用汎用カラム", "コマンド", "学園用_セーブカラム", "学園用_ロードカラム"
ENDIF

;プレイヤーがロケーションとして滞在できるのは現時点では自宅と学校だけにしたい
TRYCALLFORM ロケーション_%CSTR:PLAYER:現在地%

@COLUMNSHOP_SCHOOL
CALL COLUMNPRINT, 0, @"□%日付表示()%"
CALL COLUMNPRINT, 0, @"%ゲームモード表示()% "
IF GUI
	;ここらへんでカレンダーを表示してみる
	CALL カレンダー生成
	;そうそうサイズは変わらないと思うのでサイズ直指定してみる
	CALL COLUMNPRINT, 0, "　　　　　　　"
	CALL COLUMNIMG, 0, "カレンダー", 1095, 1162
ENDIF
CALL COLUMNPRINTL, 0, ""
CALL COLUMNPRINTL, 0, @"　所持金:%TOOPTIONINT(MONEY)%＄"

@学園用_セーブカラム
CALL SHOP_セーブ

@学園用_セーブカラム_INPUT
CALL SHOP_セーブ_INPUT

@学園用_ロードカラム
CALL SHOP_ロード

@学園用_ロードカラム_INPUT
CALL SHOP_ロード_INPUT
