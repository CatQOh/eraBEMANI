@ロケーション条件_公園
;汎用ロケーション 条件無し
RETURN 1

@出現キャラ_公園
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC グループ数

;NOではなく登録番号で指定する

FOR LCOUNT, 1, CHARANUM
	;学校などに行ってるキャラは居ない
	SIF CSTR:LCOUNT:現在地 != ""
		CONTINUE
	;子供や変な人がよくいる
	SELECTCASE CHARANAMEF(LCOUNT)
		{
		CASE "神崎 士朗", "北見 エリカ", "ルルスス", "スタンパ", "赤シグ", "黄シグ", "青シグ", 
			 "ひなた", "アイ", "まゆ", "大犬のお姉さん", "蒼", "雛", "桃", "ニア", "ノア", 
			 "カヲル", "アシタ", "タマヨ", "ナズナ", "スズナ", "おんなのこ", "歩", "ハヤト", 
			 "育江", "サン", "白鳥 姫子", "アリシア", "風雅", "烈", "フローラ", "ポチコ", 
			 "ミニッツ", "茜", "アミュレット", "あい", "サニー", "セイナ", "ローズ", "リリカ", "ココ", 
			 "ラスク", "グリム・ラスク"
		}
			出現率:LCOUNT = 30
		;集団で公園に来るような人はあまりいない
		CASEELSE
			IF CSTR:LCOUNT:在校 != "" && RAND:300 == 0 && グループ数 < 10
				;相性の良いキャラと2～3人で行動している
				CALL クラスメイト選出, LCOUNT, "相性"
				;2人以上揃わなかったら無かったことにする
				SIF RESULT:0 == 0
					CONTINUE
				;2～3人のグループ
				集団行動:グループ数:0 = LCOUNT
				集団行動:グループ数:1 = RESULT:0
				SIF RANDPER(30)
					集団行動:グループ数:2 = RESULT:1
				グループ数++
			ENDIF
	ENDSELECT
NEXT
