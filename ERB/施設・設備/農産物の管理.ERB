@農産物
DRAWLINE
PRINTL □農産物の管理
PRINTFORML 　現在の設備 田んぼ:{ITEM:田んぼ}/{田んぼ上限} 畑:{ITEM:畑}/{畑上限} プランター:{ITEM:プランター}/4
PRINTFORML 　現在の人員 配属人数:{CMATCH(CSTR:配属, "農業")}/{ITEM:畑+ITEM:田んぼ*3+(ITEM:プランター > 0)} 栽培レベル:{栽培レベル()}
PRINTL 
IF ITEM:田んぼ || ITEM:畑 || ITEM:プランター
	PRINTFORML [0] - 作物を植える
	PRINTFORML [1] - 人員を配置する
ELSE
	HTML_PRINT SET_TOOLTIP("[-] - 作物を植える", "農業用の設備を導入する必要があります")
	HTML_PRINT SET_TOOLTIP("[-] - 人員を配置する", "農業用の設備を導入する必要があります")
ENDIF
PRINTFORML [2] - 生産状況を確認する
PRINTFORML [3] - 設備を導入する
DRAWLINE
PRINTPLAIN 　農業　
PRINTL [9] - 戻る

DO
	INPUT
	SELECTCASE RESULT
		CASE 0
			SIF ITEM:田んぼ || ITEM:畑 || ITEM:プランター
				CALL 作物を植える
			RESTART
		CASE 1
			SIF ITEM:田んぼ || ITEM:畑 || ITEM:プランター
				CALL STRATEGY_PERSONAL, "農業"
			RESTART
		CASE 2
			CALL 生産状況
			RESTART
		CASE 3
			CALL 農業設備導入
			RESTART
		CASE 9
			RETURN
	ENDSELECT
LOOP 1

@作物を植える
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC 栽培レベル
#DIM DYNAMIC 魔法レベル
#DIM DYNAMIC 科学レベル

FOR LCOUNT, 1, CHARANUM
	SIF CSTR:LCOUNT:配属 != "農業"
		CONTINUE
	栽培レベル += ABL:LCOUNT:栽培技能
	魔法レベル += ABL:LCOUNT:魔法技能
	科学レベル += ABL:LCOUNT:工作技能
NEXT

$RESTART
DRAWLINE
PRINTL □栽培に使う土地を選んでください
SETCOLORBYNAME gray
IF ITEM:プランター
	PRINTFORMDL [1] - プランター (現在{ITEM:プランター}個所持)
ELSE
	PRINTL [-] - プランター (未所持)
ENDIF
IF ITEM:畑
	PRINTFORMDL [2] - 畑 (現在{ITEM:畑}枚所持)
ELSE
	PRINTL [-] - 畑 (未所持)
ENDIF
IF ITEM:田んぼ
	PRINTFORMDL [3] - 田んぼ (現在{ITEM:田んぼ}枚所持)
ELSE
	PRINTL [-] - 田んぼ (未所持)
ENDIF
RESETCOLOR
DRAWLINE
PRINTPLAIN 　作物を植える　
PRINTL [0] - 戻る

DO
	INPUT
	SELECTCASE RESULT
		CASE 0
			RETURN
		CASE 1
			SIF ITEM:プランター
				GOTO プランター
		CASE 2
			SIF ITEM:畑
				GOTO 畑
		CASE 3
			SIF ITEM:田んぼ
				GOTO 田んぼ
	ENDSELECT
LOOP 1



$プランター
PRINTL □プランターに植えたい作物を選んでください





@生産状況

@栽培解禁
#DIM DYNAMIC 栽培レベル
#DIM DYNAMIC LCOUNT

FOR LCOUNT, 1, CHARANUM
	SIF CSTR:LCOUNT:配属 != "農業"
		CONTINUE
	栽培レベル += ABL:LCOUNT:栽培技能
NEXT

LOCAL = 0

IF 栽培レベル >= 1 && !ハーブ
	PRINTL 栽培:ハーブ(プランター)を解禁しました
	ハーブ = 1
ENDIF
IF 栽培レベル >= 2 && !もやし
	PRINTL 栽培:もやし(プランター)を解禁しました
	もやし = 1
ENDIF
IF 栽培レベル >= 3 && !イチゴ
	PRINTL 栽培:イチゴ(プランター)を解禁しました
	PRINTL 栽培:トマト(畑)を解禁しました
	イチゴ = 1
	トマト = 1
ENDIF
IF 栽培レベル >= 4 && !唐辛子
	PRINTL 栽培:唐辛子(プランター)を解禁しました
	PRINTL 栽培:きゅうり(畑)を解禁しました
	唐辛子 = 1
	きゅうり = 1
ENDIF
IF 栽培レベル >= 5 && !じゃがいも
	PRINTL 栽培:じゃがいも(畑)を解禁しました
	PRINTL 栽培:さつまいも(畑)を解禁しました
	じゃがいも = 1
	さつまいも = 1
ENDIF
IF 栽培レベル >= 6 && !ナス
	PRINTL 栽培:ナス(畑)を解禁しました
	PRINTL 栽培:ピーマン(畑)を解禁しました
	ナス = 1
	ピーマン = 1
ENDIF
IF 栽培レベル >= 7 && !大根
	PRINTL 栽培:大根(畑)を解禁しました
	PRINTL 栽培:人参(畑)を解禁しました
	大根 = 1
	人参 = 1
ENDIF
IF 栽培レベル >= 8 && !玉ねぎ
	PRINTL 栽培:玉ねぎ(畑)を解禁しました
	PRINTL 栽培:長ねぎ(畑)を解禁しました
	玉ねぎ = 1
	長ねぎ = 1
ENDIF
IF 栽培レベル >= 9 && !レモン
	PRINTL 栽培:レモン(プランター)を解禁しました
	PRINTL 栽培:ライム(プランター)を解禁しました
	レモン = 1
	ライム = 1
ENDIF
IF 栽培レベル >= 10 && !とうもろこし
	PRINTL 栽培:レタス(畑)を解禁しました
	PRINTL 栽培:ごぼう(畑)を解禁しました
	レタス = 1
	ごぼう = 1
ENDIF
IF 栽培レベル >= 11 && !りんご
	PRINTL 栽培:りんご(畑)を解禁しました
	PRINTL 栽培:みかん(畑)を解禁しました
	りんご = 1
	みかん = 1
ENDIF
IF 栽培レベル >= 12 && !ブルーベリー
	PRINTL 栽培:ブルーベリー(プランター)を解禁しました
	PRINTL 栽培:ラズベリー(プランター)を解禁しました
	ブルーベリー = 1
	ラズベリー = 1
ENDIF
IF 栽培レベル >= 13
	PRINTL 栽培:キャベツ(畑)を解禁しました
	PRINTL 栽培:白菜(畑)を解禁しました
	キャベツ = 1
	白菜 = 1
ENDIF
IF 栽培レベル >= 14
	PRINTL 栽培:とうもろこし(畑)を解禁しました
	PRINTL 栽培:かぼちゃ(畑)を解禁しました
	とうもろこし = 1
	かぼちゃ = 1
ENDIF
IF 栽培レベル >= 15 && !米
	PRINTL 栽培:米(田んぼ)を解禁しました
	PRINTL 栽培:麦(田んぼ)を解禁しました
	米 = 1
	麦 = 1
ENDIF
IF 栽培レベル >= 16 && !にんにく
	PRINTL 栽培:にんにく(プランター)を解禁しました
	にんにく = 1
ENDIF
IF 栽培レベル >= 17 && !メロン
	PRINTL 栽培:メロン(畑)を解禁しました
	PRINTL 栽培:スイカ(畑)を解禁しました
	メロン = 1
	スイカ = 1
ENDIF
IF 栽培レベル >= 18 && !薔薇
	PRINTL 栽培:薔薇(プランター)を解禁しました
	薔薇 = 1
ENDIF
IF 栽培レベル >= 20 && !ぶどう
	PRINTL 栽培:ぶどう(畑)を解禁しました
	ぶどう = 1
ENDIF

IF 栽培レベル >= 30 && !嘆きの樹
	PRINTL 栽培:嘆きの樹(プランター)を解禁しました
	嘆きの樹 = 1
	;実績:すべての作物を解禁する
	CALL 実績解除, "Power of Nature"
ENDIF

;畑は栽培レベル3から購入可能
IF 栽培レベル >= 3 && 畑上限 < 1
	畑上限++
	PRINTL 畑を購入できるようになりました
ENDIF

;以後、栽培レベル3上昇ごとに畑上限が1増える 最大で8枚
FOR LCOUNT, 2, 8
	IF 栽培レベル >= LCOUNT*3 && 畑上限 < LCOUNT
		畑上限++
		PRINTFORML 畑の所持上限が増えました(現在{畑上限}枚 \@ 畑上限 == 8 ? 畑全解禁！ #  \@)
	ENDIF
NEXT

IF 栽培レベル >= 15 && 田んぼ上限 < 1
	田んぼ上限++
	PRINTL 田んぼを購入できるようになりました
ENDIF
IF 栽培レベル >= 30 && 田んぼ上限 < 2
	田んぼ上限++
	PRINTL 田んぼの所持上限が増えました
ENDIF



@農業設備導入
PRINTL □農業用設備の導入
PRINTFORML 　現在の設備 田んぼ:{ITEM:田んぼ}/2 畑:{ITEM:畑}/4 プランター:{ITEM:プランター}/4
CALL PASELIL, @"　所持金:{MONEY}＄"
PRINTL 
IF ITEM:田んぼ < 2
	CALL PASELIL, @"　[0] - 田んぼを購入する(500000＄)"
ELSE
	SETCOLORBYNAME gray
	PRINTL 　[-] - 田んぼはこれ以上買えません
	RESETCOLOR
ENDIF
IF ITEM:畑 < 4
	CALL PASELIL, @"　[1] - 畑を購入する(100000＄)"
ELSE
	SETCOLORBYNAME gray
	PRINTL 　[-] - 畑はこれ以上買えません
	RESETCOLOR
ENDIF
IF ITEM:プランター < 4
	CALL PASELIL, @"　[2] - プランターを購入する(300＄)"
ELSE
	SETCOLORBYNAME gray
	PRINTL 　[-] - プランターはこれ以上買えません
	RESETCOLOR
ENDIF
PRINTL 　[9] - 戻る

DO
	INPUT
	SELECTCASE RESULT
		CASE 0
			IF ITEM:田んぼ < 2
				IF MONEY < 500000
					PRINTW 所持金が足りません
					RESTART
				ELSE
					CALL PASELIL, @"田んぼを購入します。よろしいですか？(所持金:{MONEY}＄→{MONEY-500000}＄)"
					PRINTL [0] - はい
					PRINTL [1] - いいえ
					DO
						INPUT
						SELECTCASE RESULT
							CASE 0
								PRINTW 田んぼを購入しました
								ITEM:田んぼ++
								RESTART
							CASE 1
								RESTART
						ENDSELECT
					LOOP 1
				ENDIF
			ENDIF
		CASE 1
			IF ITEM:畑 < 4
				IF MONEY < 100000
					PRINTW 所持金が足りません
					RESTART
				ELSE
					CALL PASELIL, @"畑を購入します。よろしいですか？(所持金:{MONEY}＄→{MONEY-100000}＄)"
					PRINTL [0] - はい
					PRINTL [1] - いいえ
					DO
						INPUT
						SELECTCASE RESULT
							CASE 0
								PRINTW 畑を購入しました
								ITEM:畑++
								RESTART
							CASE 1
								RESTART
						ENDSELECT
					LOOP 1
				ENDIF
			ENDIF
		CASE 2
			IF ITEM:プランター < 4
				IF MONEY < 300
					PRINTW 所持金が足りません
					RESTART
				ELSE
					CALL PASELIL, @"プランターを購入します。よろしいですか？(所持金:{MONEY}＄→{MONEY-300}＄)"
					PRINTL [0] - はい
					PRINTL [1] - いいえ
					DO
						INPUT
						SELECTCASE RESULT
							CASE 0
								PRINTW プランターを購入しました
								ITEM:プランター++
								RESTART
							CASE 1
								RESTART
						ENDSELECT
					LOOP 1
				ENDIF
			ENDIF
		CASE 9
			RETURN
	ENDSELECT
LOOP 1

@栽培レベル, ARG
#FUNCTION
#DIM DYNAMIC LCOUNT

LOCAL = 0

FOR LCOUNT, 1, CHARANUM
	SIF CSTR:LCOUNT:配属 != "農業"
		CONTINUE
	LOCAL += ABL:LCOUNT:栽培技能
NEXT

RETURNF LOCAL

