@HLOG2(ARG)
;log2(ARG/100)を100倍で返す
;(ただし小数部分は低い方に丸める)
;例: log2(8)==3 → HLOG2(800)==300
#FUNCTION

SELECTCASE ARG
	CASE 100
		RETURNF 0
	CASE IS < 100
		CASE IS < 2
			RETURNF -665
		CASE 2
			RETURNF -565
		CASE 3
			RETURNF -506
		CASE 4
			RETURNF -465
		CASE 5
			RETURNF -433
		CASE 6
			RETURNF -406
		CASE 7
			RETURNF -384
		CASE 8
			RETURNF -365
		CASE 9
			RETURNF -348
		CASE 10
			RETURNF -333
		CASE 11
			RETURNF -319
		CASE 12
			RETURNF -306
		CASE 13
			RETURNF -295
		CASE 14
			RETURNF -284
		CASE 15
			RETURNF -274
		CASE 16
			RETURNF -265
		CASE 17
			RETURNF -256
		CASE 18
			RETURNF -248
		CASE 19
			RETURNF -240
		CASE 20
			RETURNF -233
		CASE 21
			RETURNF -226
		CASE 22
			RETURNF -219
		CASE 23
			RETURNF -213
		CASE 24
			RETURNF -206
		CASE 25
			RETURNF -200
		CASE 26
			RETURNF -195
		CASE 27
			RETURNF -189
		CASE 28
			RETURNF -184
		CASE 29
			RETURNF -179
		CASE 30
			RETURNF -174
		CASE 31
			RETURNF -169
		CASE 32
			RETURNF -165
		CASE 33
			RETURNF -160
		CASE 34
			RETURNF -156
		CASE 35
			RETURNF -152
		CASE 36
			RETURNF -148
		CASE 37
			RETURNF -144
		CASE 38
			RETURNF -140
		CASE 39
			RETURNF -136
		CASE 40
			RETURNF -133
		CASE 41
			RETURNF -129
		CASE 42
			RETURNF -126
		CASE 43
			RETURNF -122
		CASE 44
			RETURNF -119
		CASE 45
			RETURNF -116
		CASE 46
			RETURNF -113
		CASE 47
			RETURNF -109
		CASE 48
			RETURNF -106
		CASE 49
			RETURNF -103
		CASE 50
			RETURNF -100
		CASE 51
			RETURNF -98
		CASE 52
			RETURNF -95
		CASE 53
			RETURNF -92
		CASE 54
			RETURNF -89
		CASE 55
			RETURNF -87
		CASE 56
			RETURNF -84
		CASE 57
			RETURNF -82
		CASE 58
			RETURNF -79
		CASE 59
			RETURNF -77
		CASE 60
			RETURNF -74
		CASE 61
			RETURNF -72
		CASE 62
			RETURNF -69
		CASE 63
			RETURNF -67
		CASE 64
			RETURNF -65
		CASE 65
			RETURNF -63
		CASE 66
			RETURNF -60
		CASE 67
			RETURNF -58
		CASE 68
			RETURNF -56
		CASE 69
			RETURNF -54
		CASE 70
			RETURNF -52
		CASE 71
			RETURNF -50
		CASE 72
			RETURNF -48
		CASE 73
			RETURNF -46
		CASE 74
			RETURNF -44
		CASE 75
			RETURNF -42
		CASE 76
			RETURNF -40
		CASE 77
			RETURNF -38
		CASE 78
			RETURNF -36
		CASE 79
			RETURNF -35
		CASE 80
			RETURNF -33
		CASE 81
			RETURNF -31
		CASE 82
			RETURNF -29
		CASE 83
			RETURNF -27
		CASE 84
			RETURNF -26
		CASE 85
			RETURNF -24
		CASE 86
			RETURNF -22
		CASE 87
			RETURNF -21
		CASE 88
			RETURNF -19
		CASE 89
			RETURNF -17
		CASE 90
			RETURNF -16
		CASE 91
			RETURNF -14
		CASE 92
			RETURNF -13
		CASE 93
			RETURNF -11
		CASE 94
			RETURNF -9
		CASE 95
			RETURNF -8
		CASE 96
			RETURNF -6
		CASE 97
			RETURNF -5
		CASE 98
			RETURNF -3
		CASE 99
			RETURNF -2
	CASE IS < 200
		CASE 101
			RETURNF 1
		CASE 102
			RETURNF 2
		CASE 103
			RETURNF 4
		CASE 104
			RETURNF 5
		CASE 105
			RETURNF 7
		CASE 106
			RETURNF 8
		CASE 107
			RETURNF 9
		CASE 108
			RETURNF 11
		CASE 109
			RETURNF 12
		CASE 110
			RETURNF 13
		CASE 111
			RETURNF 15
		CASE 112
			RETURNF 16
		CASE 113
			RETURNF 17
		CASE 114
			RETURNF 18
		CASE 115
			RETURNF 20
		CASE 116
			RETURNF 21
		CASE 117
			RETURNF 22
		CASE 118
			RETURNF 23
		CASE 119
			RETURNF 25
		CASE 120
			RETURNF 26
		CASE 121
			RETURNF 27
		CASE 122
			RETURNF 28
		CASE 123
			RETURNF 29
		CASE 124
			RETURNF 31
		CASE 125
			RETURNF 32
		CASE 126
			RETURNF 33
		CASE 127
			RETURNF 34
		CASE 128
			RETURNF 35
		CASE 129
			RETURNF 36
		CASE 130
			RETURNF 37
		CASE 131
			RETURNF 38
		CASE 132
			RETURNF 40
		CASE 133
			RETURNF 41
		CASE 134
			RETURNF 42
		CASE 135
			RETURNF 43
		CASE 136
			RETURNF 44
		CASE 137
			RETURNF 45
		CASE 138
			RETURNF 46
		CASE 139
			RETURNF 47
		CASE 140
			RETURNF 48
		CASE 141
			RETURNF 49
		CASE 142
			RETURNF 50
		CASE 143
			RETURNF 51
		CASE 144
			RETURNF 52
		CASE 145
			RETURNF 53
		CASE 146
			RETURNF 54
		CASE 147
			RETURNF 55
		CASE 148
			RETURNF 56
		CASE 149
			RETURNF 57
		CASE 150
			RETURNF 58
		CASE 151
			RETURNF 59
		CASE 152
			RETURNF 60
		CASE 153
			RETURNF 61
		CASE 154
			RETURNF 62
		CASE 155
			RETURNF 63
		CASE 156
			RETURNF 64
		CASE 157, 158
			RETURNF 65
		CASE 159
			RETURNF 66
		CASE 160
			RETURNF 67
		CASE 161
			RETURNF 68
		CASE 162
			RETURNF 69
		CASE 163
			RETURNF 70
		CASE 164
			RETURNF 71
		CASE 165
			RETURNF 72
		CASE 166, 167
			RETURNF 73
		CASE 168
			RETURNF 74
		CASE 169
			RETURNF 75
		CASE 170
			RETURNF 76
		CASE 171
			RETURNF 77
		CASE 172
			RETURNF 78
		CASE 173, 174
			RETURNF 79
		CASE 175
			RETURNF 80
		CASE 176
			RETURNF 81
		CASE 177
			RETURNF 82
		CASE 178, 179
			RETURNF 83
		CASE 180
			RETURNF 84
		CASE 181
			RETURNF 85
		CASE 182
			RETURNF 86
		CASE 183, 184
			RETURNF 87
		CASE 185
			RETURNF 88
		CASE 186
			RETURNF 89
		CASE 187
			RETURNF 90
		CASE 188, 189
			RETURNF 91
		CASE 190
			RETURNF 92
		CASE 191
			RETURNF 93
		CASE 192, 193
			RETURNF 94
		CASE 194
			RETURNF 95
		CASE 195
			RETURNF 96
		CASE 196, 197
			RETURNF 97
		CASE 198
			RETURNF 98
		CASE 199
			RETURNF 99
	CASE IS < 302
		CASE 200, 201
			RETURNF 100
		CASE 202
			RETURNF 101
		CASE 203, 204
			RETURNF 102
		CASE 205
			RETURNF 103
		CASE 206, 207
			RETURNF 104
		CASE 208
			RETURNF 105
		CASE 209
			RETURNF 106
		CASE 210, 211
			RETURNF 107
		CASE 212
			RETURNF 108
		CASE 213. 214
			RETURNF 109
		CASE 215
			RETURNF 110
		CASE 216. 217
			RETURNF 111
		CASE 218
			RETURNF 112
		CASE 219, 220
			RETURNF 113
		CASE 221
			RETURNF 114
		CASE 222, 115
			RETURNF 115
		CASE 224, 225
			RETURNF 116
		CASE 226
			RETURNF 117
		CASE 227, 228
			RETURNF 118
		CASE 229
			RETURNF 119
		CASE 230, 231
			RETURNF 120
		CASE 232
			RETURNF 121
		CASE 233, 234
			RETURNF 122
		CASE 235, 236
			RETURNF 123
		CASE 237
			RETURNF 124
		CASE 238, 239
			RETURNF 125
		CASE 240, 241
			RETURNF 126
		CASE 242
			RETURNF 127
		CASE 243, 244
			RETURNF 128
		CASE 245, 246
			RETURNF 129
		CASE 247
			RETURNF 130
		CASE 248, 249
			RETURNF 131
		CASE 250, 251
			RETURNF 132
		CASE 252, 253
			RETURNF 133
		CASE 254
			RETURNF 134
		CASE 255, 256
			RETURNF 135
		CASE 257, 258
			RETURNF 136
		CASE 259, 260
			RETURNF 137
		CASE 261, 262
			RETURNF 138
		CASE 263
			RETURNF 139
		CASE 264, 265
			RETURNF 140
		CASE 266, 267
			RETURNF 141
		CASE 268, 269
			RETURNF 142
		CASE 270, 271
			RETURNF 143
		CASE 272, 273
			RETURNF 144
		CASE 274, 275
			RETURNF 145
		CASE 276, 277
			RETURNF 146
		CASE 278
			RETURNF 147
		CASE 279, 280
			RETURNF 148
		CASE 281, 282
			RETURNF 149
		CASE 283, 284
			RETURNF 150
		CASE 285, 286
			RETURNF 151
		CASE 287, 288
			RETURNF 152
		CASE 289, 290
			RETURNF 153
		CASE 291, 292
			RETURNF 154
		CASE 293, 294
			RETURNF 155
		CASE 295, 296
			RETURNF 156
		CASE 297, 298
			RETURNF 157
		CASE 299 TO 301
			RETURNF 158
	CASE IS < 400
		CASE 302, 303
			RETURNF 159
		CASE 304, 305
			RETURNF 160
		CASE 306, 307
			RETURNF 161
		CASE 308, 309
			RETURNF 162
		CASE 310, 311
			RETURNF 163
		CASE 312, 313
			RETURNF 164
		CASE 314 TO 316
			RETURNF 165
		CASE 317, 318
			RETURNF 166
		CASE 319, 320
			RETURNF 167
		CASE 321, 322
			RETURNF 168
		CASE 323, 324
			RETURNF 169
		CASE 325 TO 327
			RETURNF 170
		CASE 328, 329
			RETURNF 171
		CASE 330, 331
			RETURNF 172
		CASE 332 TO 334
			RETURNF 173
		CASE 335, 336
			RETURNF 174
		CASE 337, 338
			RETURNF 175
		CASE 339 TO 341
			RETURNF 176
		CASE 342, 343
			RETURNF 177
		CASE 344, 345
			RETURNF 178
		CASE 346 TO 348
			RETURNF 179
		CASE 349, 350
			RETURNF 180
		CASE 351 TO 353
			RETURNF 181
		CASE 354, 355
			RETURNF 182
		CASE 356 TO 358
			RETURNF 183
		CASE 359, 360
			RETURNF 184
		CASE 361 TO 363
			RETURNF 185
		CASE 364, 365
			RETURNF 186
		CASE 366 TO 368
			RETURNF 187
		CASE 369, 370
			RETURNF 188
		CASE 371 TO 373
			RETURNF 189
		CASE 374, 375
			RETURNF 190
		CASE 376 TO 378
			RETURNF 191
		CASE 379 TO 381
			RETURNF 192
		CASE 382, 383
			RETURNF 193
		CASE 384 TO 386
			RETURNF 194
		CASE 387 TO 389
			RETURNF 195
		CASE 390, 391
			RETURNF 196
		CASE 392 TO 394
			RETURNF 197
		CASE 395 TO 397
			RETURNF 198
		CASE 398, 399
			RETURNF 199
	CASE IS < 500
		CASE 400 TO 402
			RETURNF 200
		CASE 403 TO 405
			RETURNF 201
		CASE 406 TO 408
			RETURNF 202
		CASE 409 TO 411
			RETURNF 203
		CASE 412 TO 414
			RETURNF 204
		CASE 415, 416
			RETURNF 205
		CASE 417 TO 419
			RETURNF 206
		CASE 420 TO 422
			RETURNF 207
		CASE 423 TO 425
			RETURNF 208
		CASE 426 TO 428
			RETURNF 209
		CASE 429 TO 431
			RETURNF 210
		CASE 432 TO 434
			RETURNF 211
		CASE 435 TO 437
			RETURNF 212
		CASE 438 TO 440
			RETURNF 213
		CASE 441 TO 443
			RETURNF 214
		CASE 444 TO 446
			RETURNF 215
		CASE 447 TO 450
			RETURNF 216
		CASE 451 TO 453
			RETURNF 217
		CASE 454 TO 456
			RETURNF 218
		CASE 457 TO 459
			RETURNF 219
		CASE 460 TO 462
			RETURNF 220
		CASE 463 TO 465
			RETURNF 221
		CASE 466 TO 469
			RETURNF 222
		CASE 470 TO 472
			RETURNF 223
		CASE 473 TO 475
			RETURNF 224
		CASE 476 TO 478
			RETURNF 225
		CASE 479 TO 482
			RETURNF 226
		CASE 483 TO 485
			RETURNF 227
		CASE 486 TO 489
			RETURNF 228
		CASE 490 TO 492
			RETURNF 229
		CASE 493 TO 495
			RETURNF 230
		CASE 496 TO 499
			RETURNF 231
	CASE IS < 603
		CASE 500 TO 502
			RETURNF 232
		CASE 503 TO 506
			RETURNF 233
		CASE 507 TO 509
			RETURNF 234
		CASE 510 TO 513
			RETURNF 235
		CASE 514 TO 516
			RETURNF 236
		CASE 517 TO 520
			RETURNF 237
		CASE 521 TO 524
			RETURNF 238
		CASE 525 TO 527
			RETURNF 239
		CASE 528 TO 531
			RETURNF 240
		CASE 532 TO 535
			RETURNF 241
		CASE 536 TO 538
			RETURNF 242
		CASE 539 TO 542
			RETURNF 243
		CASE 543 TO 546
			RETURNF 244
		CASE 547 TO 550
			RETURNF 245
		CASE 551 TO 554
			RETURNF 246
		CASE 555 TO 557
			RETURNF 247
		CASE 558 TO 561
			RETURNF 248
		CASE 562 TO 565
			RETURNF 249
		CASE 566 TO 569
			RETURNF 250
		CASE 570 TO 573
			RETURNF 251
		CASE 574 TO 577
			RETURNF 252
		CASE 578 TO 581
			RETURNF 253
		CASE 582 TO 585
			RETURNF 254
		CASE 586 TO 589
			RETURNF 255
		CASE 590 TO 593
			RETURNF 256
		CASE 594 TO 597
			RETURNF 257
		CASE 598 TO 602
			RETURNF 258
	CASE IS < 702
		CASE 603 TO 606
			RETURNF 259
		CASE 607 TO 610
			RETURNF 260
		CASE 611 TO 614
			RETURNF 261
		CASE 615 TO 619
			RETURNF 262
		CASE 620 TO 623
			RETURNF 263
		CASE 624 TO 627
			RETURNF 264
		CASE 628 TO 632
			RETURNF 265
		CASE 633 TO 636
			RETURNF 266
		CASE 637 TO 640
			RETURNF 267
		CASE 641 TO 645
			RETURNF 268
		CASE 646 TO 649
			RETURNF 269
		CASE 650 TO 654
			RETURNF 270
		CASE 655 TO 658
			RETURNF 271
		CASE 659 TO 663
			RETURNF 272
		CASE 664 TO 668
			RETURNF 273
		CASE 669 TO 672
			RETURNF 274
		CASE 673 TO 677
			RETURNF 275
		CASE 678 TO 682
			RETURNF 276
		CASE 683 TO 686
			RETURNF 277
		CASE 687 TO 691
			RETURNF 278
		CASE 692 TO 696
			RETURNF 279
		CASE 697 TO 701
			RETURNF 280
	CASE IS < 800
		CASE 702 TO 706
			RETURNF 281
		CASE 707 TO 711
			RETURNF 282
		CASE 712 TO 716
			RETURNF 283
		CASE 717 TO 721
			RETURNF 284
		CASE 722 TO 726
			RETURNF 285
		CASE 727 TO 731
			RETURNF 286
		CASE 732 TO 736
			RETURNF 287
		CASE 737 TO 741
			RETURNF 288
		CASE 742 TO 746
			RETURNF 289
		CASE 747 TO 751
			RETURNF 290
		CASE 752 TO 756
			RETURNF 291
		CASE 757 TO 762
			RETURNF 292
		CASE 763 TO 767
			RETURNF 293
		CASE 768 TO 772
			RETURNF 294
		CASE 773 TO 778
			RETURNF 295
		CASE 779 TO 783
			RETURNF 296
		CASE 784 TO 788
			RETURNF 297
		CASE 789 TO 794
			RETURNF 298
		CASE 795 TO 799
			RETURNF 299
	CASE IS < 901
		CASE 800 TO 805
			RETURNF 300
		CASE 806 TO 811
			RETURNF 301
		CASE 812 TO 816
			RETURNF 302
		CASE 817 TO 822
			RETURNF 303
		CASE 823 TO 828
			RETURNF 304
		CASE 829 TO 833
			RETURNF 305
		CASE 834 TO 839
			RETURNF 306
		CASE 840 TO 845
			RETURNF 307
		CASE 846 TO 851
			RETURNF 308
		CASE 852 TO 857
			RETURNF 309
		CASE 858 TO 863
			RETURNF 310
		CASE 864 TO 869
			RETURNF 311
		CASE 870 TO 875
			RETURNF 312
		CASE 876 TO 881
			RETURNF 313
		CASE 882 TO 887
			RETURNF 314
		CASE 888 TO 893
			RETURNF 315
		CASE 894 TO 900
			RETURNF 316
	CASE IS < 1006
		CASE 901 TO 906
			RETURNF 317
		CASE 907 TO 912
			RETURNF 318
		CASE 913 TO 918
			RETURNF 319
		CASE 919 TO 925
			RETURNF 320
		CASE 926 TO 931
			RETURNF 321
		CASE 932 TO 938
			RETURNF 322
		CASE 939 TO 944
			RETURNF 323
		CASE 945 TO 951
			RETURNF 324
		CASE 952 TO 957
			RETURNF 325
		CASE 958 TO 964
			RETURNF 326
		CASE 965 TO 971
			RETURNF 327
		CASE 972 TO 978
			RETURNF 328
		CASE 979 TO 984
			RETURNF 329
		CASE 985 TO 991
			RETURNF 330
		CASE 992 TO 998
			RETURNF 331
		CASE 999 TO 1005
			RETURNF 332
	CASEELSE
		RETURNF 333
ENDSELECT


@HPOW2(ARG)
;2^(ARG/100)を100倍にして返す
;(ただし小数部分は低い方に丸める)
;例: 2^0.5≒1.4142 → HPOW2(50)==141
#FUNCTION
LOCAL = 100

SELECTCASE SIGN(ARG)
	CASE 1
		LOCAL *= POWER(2, LIMIT(ARG/100, 0, 48)
		LOCAL *= HPOW2DCM(ARG%100)
		LOCAL /= 100
	CASE -1
		LOCAL *= 100
		LOCAL /= POWER(2, LIMIT(ABS(ARG)/100, 0, 48)
		LOCAL /= HPOW2DCM(ABS(ARG)%100)
ENDSELECT

RETURNF LOCAL


@HPOW2DCM(ARG)
;2^(ARG/100)を100倍にして返す関数HPOW2の小数部分の計算
;小数部分(decimal)を想定しているので引数は0～99で
#FUNCTION

SELECTCASE ARG
	CASE IS <= 1
		RETURNF 100
	CASE 2
		RETURNF 101
	CASE 3, 4
		RETURNF 102
	CASE 5
		RETURNF 103
	CASE 6, 7
		RETURNF 104
	CASE 8
		RETURNF 105
	CASE 9
		RETURNF 106
	CASE 10, 11
		RETURNF 107
	CASE 12
		RETURNF 108
	CASE 13
		RETURNF 109
	CASE 14, 15
		RETURNF 110
	CASE 16
		RETURNF 111
	CASE 17
		RETURNF 112
	CASE 18
		RETURNF 113
	CASE 19, 20
		RETURNF 114
	CASE 21
		RETURNF 115
	CASE 22
		RETURNF 116
	CASE 23
		RETURNF 117
	CASE 24, 25
		RETURNF 118
	CASE 26
		RETURNF 119
	CASE 27
		RETURNF 120
	CASE 28
		RETURNF 121
	CASE 29
		RETURNF 122
	CASE 30, 31
		RETURNF 123
	CASE 32
		RETURNF 124
	CASE 33
		RETURNF 125
	CASE 34
		RETURNF 126
	CASE 35
		RETURNF 127
	CASE 36
		RETURNF 128
	CASE 37
		RETURNF 129
	CASE 38
		RETURNF 130
	CASE 39, 40
		RETURNF 131
	CASE 41
		RETURNF 132
	CASE 42
		RETURNF 133
	CASE 43
		RETURNF 134
	CASE 44
		RETURNF 135
	CASE 45
		RETURNF 136
	CASE 46
		RETURNF 137
	CASE 47
		RETURNF 138
	CASE 48
		RETURNF 139
	CASE 49
		RETURNF 140
	CASE 50
		RETURNF 141
	CASE 51
		RETURNF 142
	CASE 52
		RETURNF 143
	CASE 53
		RETURNF 144
	CASE 54
		RETURNF 145
	CASE 55
		RETURNF 146
	CASE 56
		RETURNF 147
	CASE 57
		RETURNF 148
	CASE 58
		RETURNF 149
	CASE 59
		RETURNF 150
	CASE 60
		RETURNF 151
	CASE 61
		RETURNF 152
	CASE 62
		RETURNF 153
	CASE 63
		RETURNF 154
	CASE 64
		RETURNF 155
	CASE 65
		RETURNF 156
	CASE 66
		RETURNF 158
	CASE 67
		RETURNF 159
	CASE 68
		RETURNF 160
	CASE 69
		RETURNF 161
	CASE 70
		RETURNF 162
	CASE 71
		RETURNF 163
	CASE 72
		RETURNF 164
	CASE 73
		RETURNF 165
	CASE 74
		RETURNF 167
	CASE 75
		RETURNF 168
	CASE 76
		RETURNF 169
	CASE 77
		RETURNF 170
	CASE 78
		RETURNF 171
	CASE 79
		RETURNF 172
	CASE 80
		RETURNF 174
	CASE 81
		RETURNF 175
	CASE 82
		RETURNF 176
	CASE 83
		RETURNF 177
	CASE 84
		RETURNF 179
	CASE 85
		RETURNF 180
	CASE 86
		RETURNF 181
	CASE 87
		RETURNF 182
	CASE 88
		RETURNF 184
	CASE 89
		RETURNF 185
	CASE 90
		RETURNF 186
	CASE 91
		RETURNF 187
	CASE 92
		RETURNF 189
	CASE 93
		RETURNF 190
	CASE 94
		RETURNF 191
	CASE 95
		RETURNF 193
	CASE 96
		RETURNF 194
	CASE 97
		RETURNF 195
	CASE 98
		RETURNF 197
	CASE 99
		RETURNF 198
	CASE IS >= 100
		RETURNF 200
ENDSELECT
