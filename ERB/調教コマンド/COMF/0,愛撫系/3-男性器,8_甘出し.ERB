;-------------------------------------------------
;甘出し
;-------------------------------------------------
@USERCOM_ABLE_甘出し, ARG
#FUNCTION
;甘出し可能フラグが立ってないとダメ
;寸止めフラグはコマンド実行直前に初期化されてるため、判定はこれだけで十分
SIF TFLAG:寸止め != 2
    RETURNF 0

COMRESULT = 1
RETURNF 1

@COM_甘出し
#DIM DYNAMIC 始点
#DIM DYNAMIC 終点
#DIMS DYNAMIC 甘出しコマンド
始点 = STRFIND(PREVCOMS, "(")+1
終点 = STRFIND(PREVCOMS, ")")-1
甘出しコマンド = %SUBSTRING(PREVCOMS, 始点, 終点-始点)%
PRINTFORMW 甘出し(%甘出しコマンド%)
CALL KOJO_MESSAGE_COM

PRINTFORMW %CALLNAME:TARGET%甘出し

RETURN 1
