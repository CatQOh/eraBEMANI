;-------------------------------------------------
;触手射精止め
;-------------------------------------------------
@USERCOM_ABLE_触手射精止め, ARG
#FUNCTION
;触手ないとダメ
コマンド実行条件 += "触手召喚中じゃないと実行できない/"
SIF !TEQUIP:触手
	COMRESULT = 0
;対象にペニス無いとダメ
コマンド実行条件 += "対象に男性器が必要/"
SIF !PENIS(TARGET)
	COMRESULT = 0
;貞操帯装備中はダメ
コマンド実行条件 += "対象が貞操帯装着中は実行できない/"
SIF CFLAG:貞操帯
	COMRESULT = 0

RETURNF COMRESULT

@COM_触手射精止め
PRINTL 触手射精止め
CALL KOJO_MESSAGE_COM

;着脱の処理
INVERTBIT TEQUIP:射精止め, 0

;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
LOSEBASE:体力 += 30
LOSEBASE:気力 += 50

SOURCE:屈従 = 500
SOURCE:苦痛 = 500
SOURCE:逸脱 = 1000
SOURCE:反感 = 500

;-------------------------------------------------
;絶頂チェック
;-------------------------------------------------
CALL SOURCE_CHECK_CVAB

;-------------------------------------------------
;射精チェック
;-------------------------------------------------
CALL SAMEN_CHECK_T, 0

CALL SAMEN_SHOOT_T, 0, NOWEX:射精

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
CALL EXPUP, "緊縛経験", 1
CALL EXPUP, "射精管理経験", 1

TENTACLE++

RETURN 1

;-------------------------------------------------
;装着継続の処理
;-------------------------------------------------
@EQUIP_COM_射精止め
PRINTL ＜触手射精止め中＞

LOSEBASE:体力 += 20
LOSEBASE:気力 += 70

SOURCE:屈従 = 100
SOURCE:苦痛 = 200
SOURCE:逸脱 = 300
SOURCE:反感 = 100

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
SIF SELECTCOMS != "触手射精止め"
	CALL EXPUP, "緊縛経験", 1

;触手経験加算
TENTACLE++

RETURN 1

