;-------------------------------------------------
;前立腺刺激
;-------------------------------------------------
@USERCOM_ABLE_前立腺刺激, ARG
#FUNCTION
;主人の技巧が3以下はだめ
SIF ABL:PLAYER:技巧 < 3
	RETURNF 0
;男じゃないとダメ
SIF SEX(TARGET) != 1
	RETURNF 0

COMRESULT = 1
RETURNF 1

@COM_前立腺刺激
PRINTL 前立腺刺激
SELECTCOMS = 前立腺刺激
SELECTCOM = GETNUM(TRAINNAME, "前立腺刺激")
CALL KOJO_MESSAGE_COM

;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
;消費体力、気力
LOSEBASE:体力 += 50
LOSEBASE:気力 += 100

DOWNBASE:MASTER:体力 += 30
DOWNBASE:MASTER:気力 += 20

SOURCE:快A = 500
SOURCE:苦痛 = 50
SOURCE:液体 = 50
SOURCE:露出 = 100
SOURCE:逸脱 = 100
SOURCE:反感 = 100

;-------------------------------------------------
;射精ゲージチェック（奴隷）
;-------------------------------------------------
LOCAL = 300

;ABL:調教者の技巧をみる
LOCAL += LOCAL*ABL:PLAYER:技巧/5

;ABL:従順をみる
LOCAL += (LOCAL/10)*ABL:従順 - (LOCAL/10)*2

;ABL:欲望をみる
LOCAL += (LOCAL/10)*ABL:欲望

;PALAM:潤滑をみる
LOCAL += (GETPALAMLV(PALAM:潤滑, 4)-3)*(LOCAL/5)

;奴隷のABL:Ａ感覚をみる
SELECTCASE ABL:Ａ感覚
	CASE 0
		TIMES LOCAL , 1.00
	CASE 1
		TIMES LOCAL , 1.50
	CASE 2
		TIMES LOCAL , 2.50
	CASE 3
		TIMES LOCAL , 4.00
	CASE 4
		TIMES LOCAL , 6.00
	CASEELSE
		LOCAL += LOCAL*(ABL:Ａ感覚+2)
ENDSELECT

;奴隷のABL:マゾっ気をみる
LOCAL += LOCAL*ABL:マゾっ気/5

CALL 射精ゲージ増加, LOCAL, TARGET

;-------------------------------------------------
;特殊ソース処理
;-------------------------------------------------
;抑圧、抵抗持ちには、抑鬱ソース追加
SIF TALENT:抑圧 || TALENT:抵抗
	SOURCE:鬱屈 += 100

CALL 特殊ソース処理_Ａ

;-------------------------------------------------
;絶頂チェック
;-------------------------------------------------
CALL SOURCE_CHECK_CVAB

;-------------------------------------------------
;射精チェック
;-------------------------------------------------
CALL SAMEN_CHECK_T, 5

CALL SAMEN_SHOOT_T, 5, NOWEX:射精

;-------------------------------------------------
;汚れの処理
;-------------------------------------------------
;奴隷のアナル⇔調教者の手の汚れが移動
STAIN:アナル |= STAIN:PLAYER:手
STAIN:PLAYER:手 |= STAIN:アナル

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
;Ａ経験
PRINTL Ａ経験+1
EXP:Ａ経験++

CALL EXPUP, 1, 2

RETURN 1

