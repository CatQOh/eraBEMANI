@COM_ORDER
VARSET LOCAL, 0

IF ABL:従順
	LOCAL += ABL:従順*4
	PRINTFORM +従順LV{ABL:従順}({ABL:従順*4})
ENDIF
IF ABL:マゾっ気
	LOCAL += ABL:マゾっ気*2
	PRINTFORM +マゾっ気LV{ABL:マゾっ気}({ABL:マゾっ気*2})
ENDIF

;レズ調教
IF SEX(PLAYER) == 2 && SEX(TARGET) == 2
	IF ABL:レズっ気
		LOCAL += ABL:レズっ気*3
		PRINTFORM +レズっ気LV{ABL:レズっ気}({ABL:レズっ気*3})
	ENDIF
	IF ABL:レズ中毒
		LOCAL += ABL:レズ中毒*3
		PRINTFORM +レズ中毒LV{ABL:レズ中毒}({ABL:レズ中毒*3})
	ENDIF
	IF TALENT:両刀
		LOCAL += 10
		PRINTFORM +両刀(10)
	ENDIF
	IF TALENT:好奇心
		LOCAL += 7
		PRINTFORM +好奇心(7)
	ENDIF
	IF TALENT:保守的
		LOCAL -= 13
		PRINTFORM -保守的(13)
	ENDIF
;ゲイ調教
ELSEIF SEX(PLAYER) == 1 && SEX(TARGET) == 1
	IF ABL:ホモっ気
		LOCAL += ABL:ホモっ気*3
		PRINTFORM +ホモっ気LV{ABL:ホモっ気}({ABL:ホモっ気*3})
	ENDIF
	IF ABL:ゲイ中毒
		LOCAL += ABL:ゲイ中毒*3
		PRINTFORM +ゲイ中毒LV{ABL:ゲイ中毒}({ABL:ゲイ中毒}*3)
	ENDIF
	IF TALENT:両刀
		LOCAL += 10
		PRINTFORM +両刀(10)
	ENDIF
	IF TALENT:好奇心
		LOCAL += 7
		PRINTFORM +好奇心(7)
	ENDIF
	IF TALENT:保守的
		LOCAL -= 13
		PRINTFORM -保守的(13)
	ENDIF
ELSE
	IF TALENT:好奇心
		LOCAL += 5
		PRINTFORM +好奇心(5)
	ENDIF
	IF TALENT:保守的
		LOCAL -= 10
		PRINTFORM -保守的(10)
	ENDIF
ENDIF

;刻印チェック
IF MARK:苦痛刻印
	LOCAL += MARK:苦痛刻印*5
	PRINTFORM +苦痛刻印LV{MARK:苦痛刻印}({MARK:苦痛刻印*5})
ENDIF

;プライド
IF TALENT:プライド高い
	LOCAL:1 = 4
ELSEIF TALENT:プライド低い
	LOCAL:1 = 1
ELSE
	LOCAL:1 = 2
ENDIF

;屈服刻印および反発刻印とプライド
IF MARK:屈服刻印
	LOCAL += MARK:屈服刻印*3*LOCAL:1
	PRINTFORM +屈服刻印LV{MARK:屈服刻印}({MARK:屈服刻印*3*LOCAL:1})
ENDIF
IF MARK:反発刻印
	LOCAL -= MARK:反発刻印*2*LOCAL:1
	PRINTFORM -反発刻印LV{MARK:反発刻印}({MARK:反発刻印*2*LOCAL:1})
ENDIF

LOCAL:1 = GETPALAMLV(PALAM:恭順, 5)
IF LOCAL:1
	LOCAL += LOCAL:1*3
	PRINTFORM +恭順LV{LOCAL:1}({LOCAL:1*3})
ENDIF

;PALAM:恐怖
LOCAL:1 = GETPALAMLV(PALAM:恐怖, 5)
IF LOCAL:1
	LOCAL += LOCAL:1*3
	PRINTFORM +恐怖LV{LOCAL:1}({LOCAL:1*3})
ENDIF

IF TALENT:服従
	LOCAL += 10
	PRINTFORM +服従(10)
ENDIF
IF TALENT:隷属
	LOCAL += 20
	PRINTFORM +隷属(20)
ENDIF
IF TALENT:反抗的 && !CFLAG:陥落
	LOCAL -= 5
	PRINTFORM -反抗的(5)
ENDIF
IF TALENT:気丈
	LOCAL -= 5
	PRINTFORM -気丈(5)
ENDIF
IF TALENT:素直
	LOCAL += 5
	PRINTFORM +素直(5)
ENDIF
IF TALENT:プライド高い
	LOCAL -= 15
	PRINTFORM -プライド高い(15)
ENDIF
IF TALENT:プライド低い
	LOCAL += 5
	PRINTFORM +プライド低い(5)
ENDIF
IF TALENT:ツンデレ
	IF ABL:従順 < 4
		LOCAL -= 7
		PRINTFORM -ツンデレ(7)
	ELSE
		LOCAL += 7
		PRINTFORM +ツンデレ(7)
	ENDIF
ENDIF
IF TALENT:目立ちたがり
	LOCAL += 2
	PRINTFORM +目立ちたがり(2)
ENDIF
IF TALENT:抑圧
	LOCAL -= 10
	PRINTFORM -抑圧(10)
ENDIF
IF TALENT:抵抗
	LOCAL -= 12
	PRINTFORM -抵抗(12)
ENDIF
IF TALENT:弱味
	LOCAL += 12
	PRINTFORM +弱味(12)
ENDIF
IF TALENT:弱気
	LOCAL += 8
	PRINTFORM +弱気(8)
ENDIF
IF TALENT:強気
	LOCAL -= 8
	PRINTFORM -強気(8)
ENDIF
IF TALENT:即落ち
	LOCAL += 10
	PRINTFORM +即落ち(10)
ENDIF
IF TALENT:妄信
	LOCAL += 8
	PRINTFORM +妄信(8)
ENDIF
IF TALENT:寂しがり屋 && ASSI > 0
	LOCAL += 6
	PRINT +寂しがり屋(6)
ENDIF
IF TALENT:同族嫌悪 && CSTR:種族 == CSTR:PLAYER:種族
	LOCAL -= 10
	PRINT -同族嫌悪(10)
ENDIF

IF TALENT:男好き && SEX(PLAYER) == 1
	LOCAL += 3
	PRINT +男好き(3)
ENDIF
IF TALENT:女好き && SEX(PLAYER) == 2
	LOCAL += 3
	PRINT +女好き(3)
ENDIF
IF TALENT:男嫌い && SEX(PLAYER) == 1
	LOCAL -= 5
	PRINT -男嫌い(5)
ENDIF
IF TALENT:女嫌い && SEX(PLAYER) == 2
	LOCAL -= 5
	PRINT -女嫌い(5)
ENDIF
IF TALENT:サボり魔
	LOCAL -= 3
	PRINT -サボり魔(3)
ENDIF
IF TALENT:子供好き && TALENT:PLAYER:小柄体型
	LOCAL += 3
	PRINT +子供好き(3)
ENDIF

;調教者の能力、素質
IF ABL:PLAYER:サドっ気
	LOCAL += ABL:PLAYER:サドっ気*2
	PRINTFORM +%CALLNAME:PLAYER%のサドっ気LV{ABL:PLAYER:サドっ気}({ABL:PLAYER:サドっ気*2})
ENDIF
IF TALENT:PLAYER:魅惑
	LOCAL += 6
	PRINTFORM +%CALLNAME:PLAYER%の魅惑(6)
ENDIF
IF TALENT:PLAYER:謎の魅力
	LOCAL += 8
	PRINTFORM +%CALLNAME:PLAYER%の謎の魅力(8)
ENDIF
IF TALENT:PLAYER:サド
	LOCAL += 3
	PRINTFORM +%CALLNAME:PLAYER%がサド(3)
ENDIF
IF TALENT:PLAYER:強気
	LOCAL += 5
	PRINTFORM +%CALLNAME:PLAYER%が強気(5)
ENDIF
IF TALENT:PLAYER:弱気
	LOCAL -= 5
	PRINTFORM -%CALLNAME:PLAYER%が弱気(5)
ENDIF

;助手の素質
IF ASSI >= 0 && TALENT:ASSI:鼓舞
	LOCAL += 2
	PRINTFORM +%CALLNAME:ASSI%が鼓舞(2)
ENDIF
IF ASSI >= 0 && TALENT:ASSI:ハイテンション
	LOCAL += 2
	PRINTFORM +%CALLNAME:ASSI%がハイテンション(2)
ENDIF

;アニマルは依存度（なつき度）が足りないと猛反発
IF TALENT:アニマル
	SELECTCASE CFLAG:依存度
		CASE IS <= 0
			PRINT -なつき度皆無(100)
			LOCAL -= 100
		CASE IS <= 100
			PRINT -懐いていない(70)
			LOCAL -= 70
		CASE IS <= 300
			PRINT -警戒している(50)
			LOCAL -= 50
		CASE IS <= 500
			PRINT -好かれていない(30)
			LOCAL -= 30
		CASE IS <= 700
			PRINT -嫌いじゃない(10)
			LOCAL -= 10
		CASE IS <= 1000
			PRINT -対等(3)
			LOCAL -= 3
		CASE IS <= 1300
			PRINT +気になる相手(5)
			LOCAL += 5
		CASE IS <= 1500
			PRINT +可愛がってくれる相手(10)
			LOCAL += 10
		CASE IS <= 2000
			PRINT +飼い主(15)
			LOCAL += 15
		CASE IS <= 3000
			PRINT +大好きな飼い主(30)
			LOCAL += 30
		CASEELSE
			PRINT +ご主人様♥(50)
			LOCAL += 50
	ENDSELECT
ENDIF

;酔
IF CFLAG:酔
	LOCAL += CFLAG:酔/10+1
	PRINTFORM +酔({CFLAG:酔/10+1})
ENDIF

;相性チェック
SELECTCASE RELATION:(NO:PLAYER)
	CASE 0 TO 30
		LOCAL -= 10
		PRINT -相性最悪(10)
	CASE 30 TO 70
		LOCAL -= 6
		PRINT -相性悪い(6)
	CASE 70 TO 99
		LOCAL -= 3
		PRINT -相性いまいち(3)
	CASE 101 TO 130
		LOCAL += 3
		PRINT +相性ややよい(3)
	CASE 130 TO 170
		LOCAL += 6
		PRINT +相性よい(6)
	CASE IS >= 170
		LOCAL += 10
		PRINT +相性最高(10)
ENDSELECT

IF TFLAG:ヒートストローク && FLAG:気温 >= 200
	LOCAL += (FLAG:気温-200)/10+1
	PRINTFORM +ヒートストローク({(FLAG:気温-200)/10+1})
ENDIF
IF TFLAG:ホワイトアウト && FLAG:気温 <= 200
	LOCAL += ABS((FLAG:気温-200)/10+1)
	PRINTFORM +ホワイトアウト({ABS((FLAG:気温-200)/10+1)})
ENDIF
IF TFLAG:メタリックマインド
	LOCAL -= 15
	PRINT -メタリックマインド(15)
ENDIF

RETURN LOCAL

@COM_ORDER_欲情, ARG
IF ARG == 0
	LOCAL:1 = GETPALAMLV(PALAM:欲情, 5)
	LOCAL:2 = LOCAL:1
	SIF TALENT:衝動的
		TIMES LOCAL:2 , 1.50
	SIF TALENT:冷静
		TIMES LOCAL:2 , 0.50
	IF LOCAL:2
		LOCAL += LOCAL:2*3
		PRINTFORM +欲情LV{LOCAL:1}({LOCAL:2*3})
	ENDIF
	RETURN LOCAL:2*3
ELSEIF ARG == 1
	LOCAL:2 = GETPALAMLV(PALAM:欲情, 5)
	SIF TALENT:衝動的
		LOCAL:2 += 2
	SIF TALENT:冷静
		TIMES LOCAL:2 , 0.75
	IF LOCAL:2
		LOCAL += LOCAL:2
		PRINTFORM +欲情LV{GETPALAMLV(PALAM:欲情, 5)}({LOCAL:2})
	ENDIF
	RETURN LOCAL:2
ENDIF

@COM_ORDER_自慰
VARSET LOCAL
IF ABL:欲望
	LOCAL += ABL:欲望*3
	PRINTFORM +欲望LV{ABL:欲望}({ABL:欲望*3})
ENDIF
IF ABL:露出癖
	LOCAL += ABL:露出癖*4
	PRINTFORM +露出癖LV{ABL:露出癖}({ABL:露出癖*4})
ENDIF
IF ABL:自慰中毒
	LOCAL += ABL:自慰中毒*3
	PRINTFORM +自慰中毒LV{ABL:自慰中毒}({ABL:自慰中毒*3})
ENDIF
IF MARK:快楽刻印
	LOCAL += MARK:快楽刻印*3
	PRINTFORM +快楽刻印LV{MARK:快楽刻印}({MARK:快楽刻印*3})
ENDIF

CALL COM_ORDER_欲情, 0
LOCAL += RESULT

;自制心
IF TALENT:自制心
	LOCAL -= 5
	PRINTFORM -自制心(5)
ENDIF
;恥じらい
IF TALENT:恥じらい
	LOCAL -= 5
	PRINTFORM -恥じらい(5)
ENDIF
;恥薄い
IF TALENT:恥薄い
	LOCAL += 2
	PRINTFORM +恥薄い(2)
ENDIF
;自慰しやすい
IF TALENT:自慰しやすい
	LOCAL += 5
	PRINTFORM +自慰しやすい(5)
ENDIF
;快感に素直
IF TALENT:快感に素直
	LOCAL += 5
	PRINTFORM +快感に素直(5)
ENDIF
;快感の否定 淫乱or娼婦で無効
IF TALENT:快感の否定 && FALLTYPE(TARGET) != 2
	LOCAL -= 5
	PRINTFORM -快感の否定(5)
ENDIF
;媚薬
IF TEQUIP:媚薬
	LOCAL += 8
	PRINTFORM +媚薬(8)
ENDIF

RETURN LOCAL

@COM_ORDER_キス
VARSET LOCAL

IF ABL:欲望
	LOCAL += ABL:欲望
	PRINTFORM +欲望LV{ABL:欲望}({ABL:欲望})
ENDIF

IF ABL:奉仕精神
	LOCAL += ABL:奉仕精神*4
	PRINTFORM +奉仕精神LV{ABL:奉仕精神}({ABL:奉仕精神*4})
ENDIF

IF MARK:快楽刻印
	LOCAL += MARK:快楽刻印*2
	PRINTFORM +快楽刻印LV{MARK:快楽刻印}({MARK:快楽刻印*2})
ENDIF

CALL COM_ORDER_欲情, 0
LOCAL += RESULT

;汚臭鈍感
IF TALENT:汚臭鈍感
	LOCAL += 1
	PRINTFORM +汚臭鈍感(1)
ENDIF
;汚臭敏感
IF TALENT:汚臭敏感
	LOCAL -= 1
	PRINTFORM -汚臭敏感(1)
ENDIF
;献身的
IF TALENT:献身的
	LOCAL += 6
	PRINTFORM +献身的(6)
ENDIF
;快感の否定 淫乱or娼婦で無効
IF TALENT:快感の否定 && FALLTYPE(TARGET) != 2
	LOCAL -= 1
	PRINTFORM -快感の否定(1)
ENDIF
;恋慕
IF TALENT:恋慕 && !ASSIPLAY
	LOCAL += 5
	PRINTFORM +恋慕(5)
ENDIF
;親愛
IF TALENT:親愛 && !ASSIPLAY
	LOCAL += 10
	PRINTFORM +親愛(10)
ENDIF

RETURN LOCAL

@実効値判定, 実効値, 基準値
#DIM DYNAMIC 実効値
#DIM DYNAMIC 基準値

;合計を表示
PRINTFORM  = {実効値}

SELECTCASE 実効値
	CASE IS < 基準値
		PRINT  < 
	CASE IS > 基準値
		PRINT  > 
	CASEELSE
		PRINT  = 
ENDSELECT
PRINTFORM 実行値{基準値}

WAIT

;実行できない
IF 実効値 < 基準値
	CALL KOJO_MESSAGE_EVENT, "コマンド拒否時"
	RETURN 0
ELSE
	RETURN 1
ENDIF

