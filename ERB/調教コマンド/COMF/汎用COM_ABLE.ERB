@USERCOM_ABLE_性交, ARG
#FUNCTION
;ゲーセンに居る場合はトイレじゃないとできない
コマンド実行条件 += "ゲーセンではトイレじゃないと実行できない/"
SIF TEQUIP:ゲームセンター && !TEQUIP:トイレ
	COMRESULT = 0
;上級売春中は方針がハード、SMじゃないとダメ
SIF 上級売春中 && !GROUPMATCH(娼館方針, 2, 3)
	COMRESULT = 0
;調教者がペニス有り、もしくはペニスバンドがないとダメ
コマンド実行条件 += "実行者に男性器が必要"
コマンド実行条件 += "　正常位系、後背位系のみペニスバンドで代用できる"
SIF !PENIS(PLAYER) && !TEQUIP:PLAYER:ペニスバンド
	COMRESULT = 0
;膣に何か入ってるとダメ
コマンド実行条件 += "対象がV使用中は実行できない/"
SIF Ｖ使用中(TARGET)
	COMRESULT = 0
;Ｐ使用中か使用不可のときはダメ
SIF Ｐ使用中(PLAYER) || Ｐ使用不可(PLAYER)
	COMRESULT = 0
;ヴァギナ無いとダメ
コマンド実行条件 += "対象に女性器が必要/"
SIF !VAGINA(TARGET)
	COMRESULT = 0
;小人体型持ちは、調教者と調教対象が小人体型ならOK
;それ以外の場合は主人が禁断の知識持ちじゃないとダメ
SIF TALENT:小人体型 && !TALENT:MASTER:禁断の知識 && !TALENT:PLAYER:小人体型
	COMRESULT = 0
;触手調教中はダメ
コマンド実行条件 += "触手召喚中は実行できない/"
SIF TEQUIP:触手
	COMRESULT = 0
;お風呂場プレイ中はプレイマットが無いとダメ
IF TEQUIP:お風呂場
	SIF !ITEM:プレイマット
		COMRESULT = 0
ENDIF

RETURNF 1

;助手実行の判定 騎乗位以外で行う
@USERCOM_ABLE_性交助手, ARG
#FUNCTION
;処女で、従順4以下・レズっ気4以下のASSIの場合背面座位はできない（男もしくはサドならＯＫ）
IF TALENT:処女 && ASSIPLAY
	SIF SEX(ASSI) == 2 && (ABL:ASSI:従順 <= 4 || ABL:ASSI:レズっ気 <= 4) && !TALENT:ASSI:サド
		COMRESULT = 0
ENDIF
;潤滑不足で、従順3以下のASSIの場合背面座位はできない（サドならＯＫ）
IF PALAM:潤滑 < PALAMLV:2 && ASSIPLAY
	SIF ABL:ASSI:従順 <= 3 && !TALENT:ASSI:サド
		COMRESULT = 0
ENDIF

RETURNF 1

@USERCOM_ABLE_Ａ性交, ARG
#FUNCTION
;ゲーセンに居る場合はトイレじゃないとできない
コマンド実行条件 += "ゲーセンではトイレじゃないと実行できない/"
SIF TEQUIP:ゲームセンター && !TEQUIP:トイレ
	COMRESULT = 0
;上級売春中は方針がハード、SMじゃないとダメ 男ならゲイじゃないとダメ
IF 上級売春中
	SIF !GROUPMATCH(娼館方針, 2, 3) || (SEX(TARGET) == 1 && !ABL:ゲイ中毒)
		COMRESULT = 0
ENDIF
;調教者がペニス有り、もしくはペニスバンドがないとダメ
SIF !PENIS(PLAYER) && !TEQUIP:PLAYER:ペニスバンド
	COMRESULT = 0
;アナル使用中はダメ
コマンド実行条件 += "対象がA道具使用中は実行できない/"
SIF Ａ使用中(TARGET)
	COMRESULT = 0
;Ｐ使用中か使用不可のときはダメ
SIF Ｐ使用中(PLAYER) || Ｐ使用不可(PLAYER)
	COMRESULT = 0
;小人体型持ちは、調教者と調教対象が小人体型ならOK
;それ以外の場合は主人が禁断の知識持ちじゃないとダメ
SIF TALENT:小人体型 && !TALENT:MASTER:禁断の知識 && !TALENT:PLAYER:小人体型
	COMRESULT = 0
;触手調教中はダメ
コマンド実行条件 += "触手召喚中は実行できない/"
SIF TEQUIP:触手
	COMRESULT = 0
;お風呂場プレイ中はプレイマットが無いとダメ
IF TEQUIP:お風呂場
	SIF !ITEM:プレイマット
		COMRESULT = 0
ENDIF

RETURNF 1

@USERCOM_ABLE_Ａ性交助手, ARG
#FUNCTION
;潤滑不足で、従順3以下のASSIの場合正常位アナルはできない（サドならＯＫ）
IF PALAM:潤滑 < PALAMLV:2 && ASSIPLAY
	SIF ABL:ASSI:従順 <= 3 && !TALENT:ASSI:サド
		COMRESULT = 0
ENDIF

RETURNF 1

@USERCOM_ABLE_性交させる, ARG
#FUNCTION
;ゲーセンに居る場合はトイレじゃないとできない
コマンド実行条件 += "ゲーセンではトイレじゃないと実行できない/"
SIF TEQUIP:ゲームセンター && !TEQUIP:トイレ
	COMRESULT = 0
;上級売春中は方針がハード、SMじゃないとダメ
SIF 上級売春中 && !GROUPMATCH(娼館方針, 2, 3)
	COMRESULT = 0
;上級売春中で方針がSM、それでもって客がマゾだと実行できない
SIF 上級売春中 && TALENT:マゾ
	COMRESULT = 0
;対象がペニス有り、もしくはペニスバンドがないとダメ
SIF !PENIS(TARGET) && !TEQUIP:ペニスバンド
	COMRESULT = 0
;助手の場合は助手が陥落していないとダメ
SIF ASSIPLAY && !CFLAG:ASSI:陥落
	COMRESULT = 0
;調教者が小人体型のとき主人が禁断の知識持ちじゃないとダメ
SIF TALENT:PLAYER:小人体型 && !TALENT:MASTER:禁断の知識 && !TALENT:小人体型
	COMRESULT = 0
;Ｐ使用中、使用不可はダメ
SIF Ｐ使用中(TARGET) || Ｐ使用不可(TARGET)
	COMRESULT = 0
;触手調教中はダメ
コマンド実行条件 += "触手召喚中は実行できない/"
SIF TEQUIP:触手
	COMRESULT = 0
;お風呂場プレイ中はプレイマットが無いとダメ
コマンド実行条件 += "お風呂場ではプレイマット(アイテム)が無いと実行できない/"
SIF TEQUIP:お風呂場 && !ITEM:プレイマット
	COMRESULT = 0
;新妻プレイ中はダメ
SIF TEQUIP:エプロン
	COMRESULT = 0
;勃起が一定以上じゃないとダメ(ペニバン装着中なら無視できる)
SIF PALAM:勃起 < PALAMLV:3 && !TEQUIP:ペニスバンド
	COMRESULT = 0
;縄使用中は出来ない
コマンド実行条件 += "縄で縛ってるときは実行できない/"
SIF TEQUIP:縄
	COMRESULT = 0

RETURNF 1

@USERCOM_ABLE_Ｐ奉仕, ARG
#FUNCTION
;ゲーセンに居る場合はトイレじゃないとできない
コマンド実行条件 += "ゲーセンではトイレじゃないと実行できない/"
SIF TEQUIP:ゲームセンター && !TEQUIP:トイレ
	COMRESULT = 0
;上級売春中は客が男嫌いだとダメ
SIF 上級売春中 && TALENT:男嫌い
	COMRESULT = 0
;調教者がペニス無いとダメ
コマンド実行条件 += "実行者に男性器が必要/"
SIF !PENIS(PLAYER)
	COMRESULT = 0
;Ｐ使用中はダメ
コマンド実行条件 += "実行者の男性器に道具使用中は実行できない/"
SIF Ｐ使用中(PLAYER)
	COMRESULT = 0
;縄使用中は不可
コマンド実行条件 += "縄で縛ってるときは実行できない/"
SIF TEQUIP:縄
	COMRESULT = 0
;触手調教中はダメ
コマンド実行条件 += "触手召喚中は実行できない/"
SIF TEQUIP:触手
	COMRESULT = 0

RETURNF 1
