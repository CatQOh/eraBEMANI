;ビデオの重複使用を処理するために、予め値段の加算を行っておく
@PRICE_VIDEO
LOCAL = 0
REPEAT TFLAG:ビデオ撮影回数
	SELECTCASE ビデオ撮影内容:COUNT
		;愛撫系
		CASE "愛撫", "アナル愛撫", "胸愛撫"
			LOCAL += 30
		CASE "クンニ", "指挿入れ", "アナル舐め", "胸揉み", "乳首責め"
			LOCAL += 60
		CASE "フェラする"
			LOCAL += 90
		CASE "秘貝開帳", "秘貝開帳見せつけ"
			LOCAL += 150
		CASE "胸自慰", "足扱きする", "下着扱きする", "手淫する", "素股する"
			LOCAL += 120
		CASE "自慰", "パイズリする", "パイズリフェラする"
			LOCAL += 200
		;コミュニケーション系
		CASE "キスする", "吸血する", "吸血させる", "キスしてもらう"
			LOCAL += 100
		CASE "何もしない", "プレゼント", "まったりする", "家事", "機械の勉強"
			LOCAL += 10
		CASE "会話", "歌の練習", "料理を作る", "お菓子を作る", "楽器の練習"
			LOCAL += 50
		CASE "罵倒", "ビデオ鑑賞", "お酒を飲ませる", "情欲を煽る"
			LOCAL += 20
		;道具系
		CASE "ローター"
			LOCAL += 90
		CASE "電気按摩", "クリキャップ", "ニプルキャップ", "搾乳器"
			LOCAL += 120
		CASE "オナホール", "バイブ", "アナルバイブ", "アナルビーズ"
			LOCAL += 150
		CASE "ニプルキャップ"
			LOCAL += 120
		CASE "乳首ローター"
			LOCAL += 60
		CASE "搾精コンドーム", "コンドーム"
			LOCAL += 30
		;セックス系
		CASE "正常位", "対面座位", "背面座位", "正常位アナル", "対面座位アナル", "背面座位アナル", "正常位させる", "後背位させる", "正常位アナルさせる", "後背位アナルさせる"
			LOCAL += 200
		CASE "後背位", "後背位アナル", "下着ずらし挿入", "下着ずらし挿入アナル"
			LOCAL += 250
		CASE "騎乗位", "騎乗位アナル"
			LOCAL += 300
		CASE "逆レイプ"
			LOCAL += 150
		;奉仕系
		CASE "手淫", "泡踊り", "足扱き", "兜合わせ", "下着扱き"
			LOCAL += 150
		CASE "フェラチオ"
			LOCAL += 180
		CASE "パイズリ", "オナホ扱き", "バイブ被挿入", "アナルバイブ被挿入"
			LOCAL += 200
		CASE "素股", "ローター愛撫させる", "電気按摩愛撫させる", "アナル愛撫させる"
			LOCAL += 100
		CASE "足を舐めさせる"
			LOCAL += 60
		CASE "縦パイズリ", "パイズリフェラ"
			LOCAL += 250
		CASE "母乳飲み"
			LOCAL += 90
		;SM系
		CASE "スパンキング", "乳スパンキング", "アイマスク", "ボールギャグ", "ビンタ", "異物挿入解除"
			LOCAL += 100
		CASE "鞭", "蝋燭", "縄", "腹パン", "踏む", "裸締め", "鞭打ちしてもらう", "踏んでもらう", "叩いてもらう"
			LOCAL += 150
		CASE "針", "首を絞める", "異物挿入"
			LOCAL += 200
		;助手系、レズ系
		CASE "クンニさせる"
			LOCAL += 100
		CASE "貝あわせ", "ダブルフェラ"
			LOCAL += 150
		CASE "助手を犯させる", "ダブルパイズリ"
			LOCAL += 200
		CASE "顔面騎乗する"
			LOCAL += 120
		CASE "乳の揉み合い"
			LOCAL += 90
		;ハードなコマンド
		CASE "イラマチオ", "浣腸器", "アナル電極", "乳房電極"
			LOCAL += 150
		CASE "フィストファック", "アナルフィスト", "乳ファック", "フィストファックさせる", "アナルフィストさせる"
			LOCAL += 200
		CASE "両穴フィスト"
			LOCAL += 250
		CASE "放尿", "空気浣腸", "拡張バルーン"
			LOCAL += 100
		CASE "アナルを舐めさせる"
			LOCAL += 60
		;触手系
		CASE "触手召喚", "触手搾乳", "触手緊縛", "触手浣腸", "触手ペニス責め", "触手搾精"
			LOCAL += 150
		CASE "触手挿入", "アナル触手", "触手強制搾精", "触手強制放尿"
			LOCAL += 200
		CASE "触手クリ責め", "触手乳首責め", "触手口辱", "触手射精止め"
			LOCAL += 100
		;その他
		CASE "ローション", "写真撮影", "強精神薬"
			LOCAL += 30
		CASE "媚薬", "利尿剤", "シャワー", "ローション注入", "腸洗浄"
			LOCAL += 60
		CASE "野外プレイ", "羞恥プレイ", "お風呂場プレイ", "新妻プレイ", "コンドーム精飲（奴隷）", "コンドーム精飲（助手）"
			LOCAL += 100
		CASE "助手を犯す"
			LOCAL += 150
		;龍姦系
		CASE "キス（ドラゴン）"
			LOCAL += 150
		CASE "フェラさせる（ドラゴン）"
			LOCAL += 200
		CASE "舐め回す（ドラゴン）"
			LOCAL += 100
		CASE "睨みつける（ドラゴン）"
			LOCAL += 50
		CASE "膣を犯す（ドラゴン）", "アナルを犯す（ドラゴン）"
			LOCAL += 300
		;派生コマンド
		CASE "3P", "二本フェラ", "数珠繋ぎ"
			LOCAL += 300
		CASE "シックスナイン", "岩清水", "搾乳"
			LOCAL += 150
		CASE "Gスポット刺激", "挿入Gスポ責め", "挿入子宮口責め", "逆レイプ首絞め", "授乳手コキ", "前立腺刺激"
			LOCAL += 200
		CASE "乱れ牡丹", "69パイズリ", "ダブル素股", "正常位キス", "対面座位キス", "正常位アナルキス", "対面座位アナルキス"
			LOCAL += 250
		CASE "騎乗乳房自慰", "騎乗位キス", "騎乗位アナルキス"
			LOCAL += 350
		CASE "正常位首絞め", "後背位首絞め", "正常位アナル首絞め", "後背位アナル首絞め"
			LOCAL += 250
		CASE "バイブオナニー", "アナルバイブオナニー", "シャワーオナニー"
			LOCAL += 250
		CASE "二穴バイブオナニー"
			LOCAL += 300
		CASE "後背位手淫", "騎乗位手淫", "後背位アナル手淫", "騎乗位アナル手淫"
			LOCAL += 250
	ENDSELECT
REND

LOCAL:1 = 100
SIF TALENT:無関心
	LOCAL:1 -= 30
SIF TALENT:感情乏しい
	LOCAL:1 -= 30
SIF TALENT:恥じらい
	LOCAL:1 += 10
SIF TALENT:小柄体型
	LOCAL:1 += 20
SELECTCASE TALENT:バストサイズ
	;素質:絶壁を見る
	CASE 1
		LOCAL:1 -= 10
	;素質:巨乳を見る
	CASE 4
		LOCAL:1 += 20
	;素質:爆乳を見る
	CASE 5
		LOCAL:1 += 10
ENDSELECT
SIF TALENT:動物耳
	LOCAL:1 += 5
SIF TALENT:尻尾
	LOCAL:1 += 5
SIF TALENT:ファーリー
	LOCAL:1 += 10
SIF TALENT:人気
	LOCAL:1 += 20
SIF TALENT:謎の魅力
	LOCAL:1 += 30
SIF TALENT:魅力
	LOCAL:1 += 20

SIF EXP:被写経験 >= EXPLV:3
	LOCAL:1 += 10

;撮影者を見る
;主人
SELECTCASE TFLAG:ビデオ撮影者
	CASE 1
		;撮影技能を見る
		SELECTCASE ABL:MASTER:撮影技能
			CASE 0
				LOCAL:1 -= 20
			CASE 1
				LOCAL:1 -= 20
			CASE 3
				LOCAL:1 += 10
			CASE 4
				LOCAL:1 += 20
			CASE IS >= 5
				LOCAL:1 += 50
		ENDSELECT
	;助手
	CASE 2
		;撮影技能を見る
		SELECTCASE ABL:ASSI:撮影技能
			CASE 0
				LOCAL:1 -= 20
			CASE 1
				LOCAL:1 -= 20
			CASE 3
				LOCAL:1 += 10
			CASE 4
				LOCAL:1 += 20
			CASE IS >= 5
				LOCAL:1 += 50
		ENDSELECT
ENDSELECT

;倍率処理
SIF LOCAL:1 < 1
	LOCAL:1 = 1

LOCAL *= LOCAL:1
LOCAL /= 100

;難易度処理
SELECTCASE FLAG:難易度
	;NORMAL
	CASE 1
		TIMES LOCAL , 1.00
	;HYPER
	CASE 2
		TIMES LOCAL , 0.80
	;ANOTHER
	CASE 3
		TIMES LOCAL , 0.60
ENDSELECT

;ゲイビデオならボーナスが付く
SIF SEX(MASTER) == SEX(TARGET)
	TIMES LOCAL , 1.10
SIF ASSI > 0 && SEX(ASSI) == SEX(TARGET)
	TIMES LOCAL , 1.10

TFLAG:ビデオ価格 += LOCAL
TFLAG:ビデオ撮影回数 = 0

@SELL_VIDEO
LOCAL = 0
;調教時に録画したビデオの売却

;撮影中のまま売却まで来た場合はテープの数を減らす
;テープの減数は撮影後処理のため、さらにビデオの値段および経験もここで処理をする
IF TEQUIP:ビデオカメラ
	ITEM:ビデオテープ--
	CALL PRICE_VIDEO
ENDIF

;録画してなければ終了
SIF TFLAG:ビデオ価格 == 0
	RETURN 0

DRAWLINE

;ビデオボーナス、もしくは処女喪失シーンがあれば内容を表示
IF VIDEOBONUS:0 || VIDEOBONUS:1 || VIDEOBONUS:2 || VIDEOBONUS:3 || VIDEOBONUS:4 || VIDEOBONUS:5 || VIDEOBONUS:6 || TFLAG:撮影破瓜
	PRINTL 【ビデオ内容】
	;処女喪失シーンがあれば加算
	IF TFLAG:撮影破瓜
		LOCAL += 5000
		EXP:異常経験++
		PRINTFORML 　このビデオには%CALLNAME:TARGET%の処女喪失シーンが記録されている
		PRINTFORML 　異常経験+1
	ENDIF

	;ビデオボーナスを見る
	;主人→奴隷 中出し&アナル中出し
	IF VIDEOBONUS:0 && VIDEOBONUS:1
		PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:MASTER%に{VIDEOBONUS:0}回膣内射精され、{VIDEOBONUS:1}回アナルにも射精されている
		LOCAL += VIDEOBONUS:0*300
		LOCAL += VIDEOBONUS:1*250
	;中出しのみ
	ELSEIF VIDEOBONUS:0
		PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:MASTER%に{VIDEOBONUS:0}回、膣内に射精されている
		LOCAL += VIDEOBONUS:0*300
	;アナル中出しのみ
	ELSEIF VIDEOBONUS:1
		PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:MASTER%に{VIDEOBONUS:1}回、アナルに射精されている
		LOCAL += VIDEOBONUS:1*250
	ENDIF

	;助手→奴隷 中出し&アナル中出し
	IF VIDEOBONUS:2 && VIDEOBONUS:3
		PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:ASSI%に{VIDEOBONUS:2}回膣内射精され、{VIDEOBONUS:3}回アナルにも射精されている
		LOCAL += VIDEOBONUS:2*300
		LOCAL += VIDEOBONUS:3*250
	;中出しのみ
	ELSEIF VIDEOBONUS:2
		PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:ASSI%に{VIDEOBONUS:2}回、膣内に射精されている
		LOCAL += VIDEOBONUS:2*300
	;アナル中出しのみ
	ELSEIF VIDEOBONUS:3
		PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:ASSI%に{VIDEOBONUS:3}回、アナルに射精されている
		LOCAL += VIDEOBONUS:3*250
	ENDIF

	;奴隷射精
	IF VIDEOBONUS:4
		PRINTFORML 　{VIDEOBONUS:4}回、%CALLNAME:TARGET%が射精している
		LOCAL += VIDEOBONUS:4*150
	ENDIF
	;奴隷放尿
	IF VIDEOBONUS:5
		PRINTFORML 　{VIDEOBONUS:5}回、%CALLNAME:TARGET%が放尿している
		LOCAL += VIDEOBONUS:5*100
	ENDIF
	;奴隷噴乳
	IF VIDEOBONUS:6
		PRINTFORML 　{VIDEOBONUS:6}回、%CALLNAME:TARGET%が噴乳している
		LOCAL += VIDEOBONUS:6*100
	ENDIF
	;主人のドラゴン→奴隷中出し&アナル中出し
	IF VIDEOBONUS:7 && VIDEOBONUS:8
		IF CSTR:MASTER:ドラゴン == "ドラゴン"
			PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:MASTER%のドラゴンに{VIDEOBONUS:7}回膣内射精され、{VIDEOBONUS:8}回アナルにも射精されている
		ELSE
			PRINTFORML 　%CALLNAME:TARGET%は%CSTR:MASTER:ドラゴン%に{VIDEOBONUS:7}回膣内射精され、{VIDEOBONUS:8}回アナルにも射精されている
		ENDIF
		LOCAL += VIDEOBONUS:7*350
		LOCAL += VIDEOBONUS:8*300
	;中出しのみ
	ELSEIF VIDEOBONUS:7
		IF CSTR:MASTER:ドラゴン == "ドラゴン"
			PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:MASTER%のドラゴンに{VIDEOBONUS:7}回、膣内に射精されている
		ELSE
			PRINTFORML 　%CALLNAME:TARGET%は%CSTR:MASTER:ドラゴン%に{VIDEOBONUS:7}回、膣内に射精されている
		ENDIF
		LOCAL += VIDEOBONUS:7*350
	;アナル中出しのみ
	ELSEIF VIDEOBONUS:8
		IF CSTR:MASTER:ドラゴン == "ドラゴン"
			PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:MASTER%のドラゴンに{VIDEOBONUS:8}回、アナルに射精されている
		ELSE
			PRINTFORML 　%CALLNAME:TARGET%は%CSTR:MASTER:ドラゴン%に{VIDEOBONUS:8}回、アナルに射精されている
		ENDIF
		LOCAL += VIDEOBONUS:8*300
	ENDIF
	;助手のドラゴン→奴隷中出し&アナル中出し
	IF VIDEOBONUS:9 && VIDEOBONUS:10
		IF CSTR:ASSI:ドラゴン == "ドラゴン"
			PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:ASSI%のドラゴンに{VIDEOBONUS:9}回膣内射精され、{VIDEOBONUS:10}回アナルにも射精されている
		ELSE
			PRINTFORML 　%CALLNAME:TARGET%は%CSTR:ASSI:ドラゴン%に{VIDEOBONUS:9}回膣内射精され、{VIDEOBONUS:10}回アナルにも射精されている
		ENDIF
		LOCAL += VIDEOBONUS:9*350
		LOCAL += VIDEOBONUS:10*300
	;中出しのみ
	ELSEIF VIDEOBONUS:9
		IF CSTR:MASTER:ドラゴン == "ドラゴン"
			PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:ASSI%のドラゴンに{VIDEOBONUS:9}回、膣内に射精されている
		ELSE
			PRINTFORML 　%CALLNAME:TARGET%は%CSTR:ASSI:ドラゴン%に{VIDEOBONUS:9}回、膣内に射精されている
		ENDIF
		LOCAL += VIDEOBONUS:9*350
	;アナル中出しのみ
	ELSEIF VIDEOBONUS:10
		IF CSTR:MASTER:ドラゴン == "ドラゴン"
			PRINTFORML 　%CALLNAME:TARGET%は%CALLNAME:ASSI%のドラゴンに{VIDEOBONUS:10}回、アナルに射精されている
		ELSE
			PRINTFORML 　%CALLNAME:TARGET%は%CSTR:ASSI:ドラゴン%に{VIDEOBONUS:10}回、アナルに射精されている
		ENDIF
		LOCAL += VIDEOBONUS:10*300
	ENDIF
	;奴隷噴乳
	IF VIDEOBONUS:11
		PRINTFORML 　%CALLNAME:TARGET%が触手に{VIDEOBONUS:11}回、膣内に射精されている
		LOCAL += VIDEOBONUS:11*400
	ENDIF
	;奴隷噴乳
	IF VIDEOBONUS:12
		PRINTFORML 　%CALLNAME:TARGET%が触手に{VIDEOBONUS:11}回、アナルに射精されている
		LOCAL += VIDEOBONUS:12*350
	ENDIF
ENDIF

DO
	CALL PASELIL, @"録画したビデオは{TFLAG:ビデオ価格+LOCAL}＄程度の値が付きそうだ"
	PRINTL 録画したビデオをどうするか選択してください
	PRINTL [0] - 売る
	PRINT [1] - 手元に残す
	SIF CFLAG:所持ビデオ数
		PRINTFORM （%CALLNAME:TARGET%のビデオは既に持っている）
	PRINTL 
	INPUT
LOOP LOOPRES(0, 1)

SELECTCASE RESULT
	CASE 0
		CALL PASELIW, @"調教時に録画したビデオを売って、{TFLAG:ビデオ価格+LOCAL}＄手に入れました"
		MONEY += TFLAG:ビデオ価格+LOCAL
		TFLAG:ビデオ価格 = 0
		;ニンフちゃん出演のAVを売りさばく
		SIF CHARANAMEF(TARGET) == "ニンフちゃん"
			CALL 実績解除, "ニンフちゃんのファンやめます"
		CALL KOJO_MESSAGE_EVENT, "ビデオ売却時"
	CASE 1
		PRINTFORMW %CALLNAME:TARGET%との思い出を保管した({CFLAG:所持ビデオ数+1}本目)
		CFLAG:所持ビデオ数++
		;理々奈のハメ撮り中出しビデオを保管する
		SIF CHARANAMEF(TARGET) == "雛月 理々奈" && VIDEOBONUS:0
			CALL 実績解除, "お兄さんにビデオレター送っとこうね"
		CALL KOJO_MESSAGE_EVENT, "ビデオ保管時"
ENDSELECT

@SELL_PICTURE
;売れる写真が無ければ関数終了
LOCAL = 0
SIF !写真価格:0
	RETURN 0
DRAWLINE
PRINTL 撮影した写真を売却します
REPEAT 10
	SIF !写真価格:COUNT
		BREAK
	PRINTFORML {COUNT+1, 2}枚目.%写真内容:COUNT%
	CALL PASELIL, @"       {写真価格:COUNT}＄の買値が付きました"
	LOCAL += 写真価格:COUNT
REND

CALL PASELIL, @"計{LOCAL}＄で売れました"
MONEY += LOCAL
WAIT
CALL KOJO_MESSAGE_EVENT, "写真売却時"

@SELL_MILK
LOCAL = TFLAG:搾乳量*50
LOCAL:1 = TFLAG:搾乳量*10
IF LOCAL > 0
	SIF TALENT:淫乳
		LOCAL *= 2

	;難易度処理
	SELECTCASE FLAG:難易度
		;NORMAL
		CASE 1
			TIMES LOCAL , 1.00
		;HYPER
		CASE 2
			TIMES LOCAL , 0.80
		;ANOTHER
		CASE 3
			TIMES LOCAL , 0.60
	ENDSELECT

	DRAWLINE

	DO
		PRINTFORML 今回の調教で%CALLNAME:TARGET%から{LOCAL:1}mlの母乳を採取した
		CALL PASELIL, @"%CALLNAME:TARGET%の母乳は{LOCAL}＄で売れそうです。売却しますか？"
		PRINTL [0] - 売却する
		PRINTL [1] - 保管する
		INPUT
	LOOP LOOPRES(0, 1)

	SELECTCASE RESULT
		CASE 0
			MONEY += LOCAL
			CALL PASELIW, @"所持金 {LOCAL}＄増加"
		CASE 1
			FLAG:保管済み母乳 += LOCAL:1
			CALL PASELIW, @"保管母乳量 {LOCAL:1}ml増加"
	ENDSELECT
ENDIF

@SELL_SAMEN
LOCAL = TFLAG:搾精量*250
LOCAL:1 = TFLAG:搾精量 * 10
IF LOCAL > 0
	DRAWLINE
	DO
		PRINTFORML 今回の調教で%CALLNAME:TARGET%から{LOCAL:1}mlの精液を採取した
		CALL PASELIL, @"%CALLNAME:TARGET%の精液は{LOCAL}＄で売れそうです。売却しますか？"
		PRINTL [0] - 売却する
		PRINTL [1] - 保管する
		INPUT
	LOOP LOOPRES(0, 1)

	SELECTCASE RESULT
		CASE 0
			MONEY += LOCAL
			CALL PASELIW, @"所持金 {LOCAL}＄増加"
		CASE 1
			FLAG:保管済み精液 += LOCAL:1
			採取精液:(NO:TARGET)++
			PRINTFORMW 保管精液量 {LOCAL:1}ml増加
	ENDSELECT
ENDIF

